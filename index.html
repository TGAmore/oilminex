<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OilMineX Pro - Ù…Ù†ØµØ© ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù†ÙØ·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        :root {
            --primary: #E5C58C;
            --primary-dark: #c9a76b;
            --secondary: #2D2A2A;
            --secondary-light: #3D3A3A;
            --dark: #1E1C1C;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --text: #FFFFFF;
            --text-muted: rgba(255,255,255,0.7);
            --border: rgba(229,197,140,0.2);
            --shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        body {
            background: var(--secondary);
            color: var(--text);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes glowPulse {
            0% { box-shadow: 0 0 5px var(--primary); }
            50% { box-shadow: 0 0 20px var(--primary), 0 0 30px var(--primary-dark); }
            100% { box-shadow: 0 0 5px var(--primary); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes rotateIn {
            from {
                transform: rotate(-180deg) scale(0);
                opacity: 0;
            }
            to {
                transform: rotate(0) scale(1);
                opacity: 1;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes loading {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes miningPulse {
            0% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.02); }
            100% { opacity: 0.6; transform: scale(1); }
        }

        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, var(--secondary) 0%, var(--dark) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .splash-content {
            text-align: center;
            animation: scaleIn 0.8s ease;
        }

        .splash-logo {
            width: 160px;
            height: 160px;
            background: linear-gradient(145deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 25px;
            box-shadow: 0 15px 35px rgba(229,197,140,0.3);
            position: relative;
            overflow: hidden;
            animation: glowPulse 2s infinite;
        }

        .splash-logo::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shine 1.5s infinite;
        }

        .splash-logo span {
            font-size: 60px;
            font-weight: 800;
            color: var(--secondary);
            z-index: 1;
        }

        .splash-title {
            font-size: 38px;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 10px;
            letter-spacing: 1px;
            animation: float 3s infinite;
        }

        .loading-bar {
            width: 220px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            margin: 20px auto 0;
            overflow: hidden;
        }

        .loading-progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #fff);
            animation: loading 2s linear forwards;
        }

        .terms-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--dark) 100%);
            z-index: 9998;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .terms-container {
            background: rgba(61,58,58,0.95);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 30px 20px;
            margin: auto;
            max-width: 500px;
            width: 100%;
            border: 2px solid var(--primary);
            box-shadow: var(--shadow);
            animation: slideInRight 0.5s ease;
        }

        .terms-title {
            font-size: 28px;
            color: var(--primary);
            text-align: center;
            margin-bottom: 20px;
            font-weight: 800;
            text-shadow: 0 2px 10px rgba(229,197,140,0.3);
        }

        .terms-content {
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 16px;
            margin-bottom: 20px;
            line-height: 1.8;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) rgba(0,0,0,0.2);
        }

        .terms-content::-webkit-scrollbar {
            width: 6px;
        }

        .terms-content::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.2);
            border-radius: 3px;
        }

        .terms-content::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }

        .terms-content p {
            margin-bottom: 15px;
            color: var(--text-muted);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(45,42,42,0.95);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 12px 8px 10px;
            border-top: 2px solid var(--primary);
            z-index: 1000;
            box-shadow: 0 -5px 25px rgba(0,0,0,0.3);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-muted);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            font-size: 12px;
            gap: 4px;
            position: relative;
        }

        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .nav-item.active {
            color: var(--primary);
            transform: translateY(-3px);
        }

        .nav-item.active::after {
            width: 30px;
        }

        .nav-item span:first-child {
            font-size: 24px;
            transition: transform 0.3s ease;
        }

        .nav-item:hover span:first-child {
            transform: scale(1.1);
        }

        .page-container {
            display: none;
            padding: 20px 20px 85px;
            min-height: 100vh;
            animation: slideInLeft 0.3s ease;
        }

        .page-container.active {
            display: block;
        }

        .card {
            background: rgba(61,58,58,0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            animation: scaleIn 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
            border-color: var(--primary);
        }

        .btn {
            background: linear-gradient(145deg, var(--primary), var(--primary-dark));
            color: var(--secondary);
            border: none;
            padding: 14px 24px;
            border-radius: 14px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 100%;
            box-shadow: 0 4px 15px rgba(229,197,140,0.2);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn:disabled::before {
            display: none;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
            box-shadow: none;
        }

        .btn-outline:hover {
            background: rgba(229,197,140,0.1);
            transform: translateY(-2px);
        }

        .btn-glow {
            animation: glowPulse 2s infinite;
        }

        .btn-sm {
            padding: 10px 16px;
            font-size: 14px;
        }

        .btn-success {
            background: linear-gradient(145deg, var(--success), #27ae60);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(145deg, var(--danger), #c0392b);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(145deg, var(--warning), #e67e22);
            color: white;
        }

        .input-group {
            margin-bottom: 18px;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary);
            font-weight: 600;
            font-size: 14px;
        }

        .input-field {
            width: 100%;
            padding: 14px 18px;
            background: rgba(30,28,28,0.7);
            border: 2px solid var(--border);
            border-radius: 14px;
            color: var(--text);
            font-size: 15px;
            outline: none;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            border-color: var(--primary);
            background: rgba(30,28,28,0.9);
            box-shadow: 0 0 0 4px rgba(229,197,140,0.1);
        }

        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            animation: slideInRight 0.3s ease;
        }

        .page-title {
            font-size: 28px;
            font-weight: 800;
            color: var(--primary);
            text-shadow: 0 2px 10px rgba(229,197,140,0.2);
        }

        .header-icons {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .icon-btn {
            font-size: 24px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .icon-btn:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .icon-btn:active {
            transform: scale(0.9);
        }

        .badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--danger);
            color: white;
            font-size: 11px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 12px;
            min-width: 18px;
            text-align: center;
            animation: pulse 1s infinite;
        }

        .balance-card {
            background: linear-gradient(145deg, var(--primary), var(--primary-dark));
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 25px;
            color: var(--secondary);
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(229,197,140,0.2);
            animation: glowPulse 3s infinite;
        }

        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: spin 20s linear infinite;
        }

        .balance-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .balance-label {
            font-size: 15px;
            opacity: 0.8;
            font-weight: 500;
        }

        .eye-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--secondary);
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .eye-btn:hover {
            transform: scale(1.1);
            opacity: 1;
        }

        .balance-amount {
            font-size: 42px;
            font-weight: 800;
            line-height: 1.2;
            transition: all 0.2s ease;
            direction: ltr;
            text-align: right;
            position: relative;
            z-index: 1;
        }

        .balance-amount.blur {
            filter: blur(8px);
            opacity: 0.6;
            user-select: none;
        }

        .balance-currency {
            font-size: 18px;
            margin-right: 5px;
            font-weight: 600;
        }

        .balance-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .packages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .package-card {
            background: linear-gradient(145deg, rgba(61,58,58,0.7), rgba(45,42,42,0.9));
            backdrop-filter: blur(5px);
            border-radius: 20px;
            padding: 20px 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .package-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(229,197,140,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .package-card:hover::before {
            transform: translateX(100%);
        }

        .package-card.selected {
            border-color: var(--primary);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 35px rgba(229,197,140,0.2);
        }

        .package-icon {
            font-size: 48px;
            margin-bottom: 12px;
            animation: float 3s infinite;
        }

        .package-name {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .package-price {
            color: var(--primary);
            font-weight: 800;
            font-size: 20px;
            margin-bottom: 5px;
        }

        .package-power {
            font-size: 13px;
            opacity: 0.7;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .mining-section {
            position: relative;
            overflow: hidden;
        }

        .mining-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--primary);
            border-radius: 50%;
            pointer-events: none;
            animation: float 1s ease-out forwards;
        }

        .mining-progress {
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 20px;
            margin-top: 15px;
        }

        .mining-timer {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .timer-circle {
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 800;
            color: var(--secondary);
            animation: pulse 2s infinite;
            box-shadow: 0 0 20px rgba(229,197,140,0.3);
        }

        .timer-info {
            flex: 1;
        }

        .timer-label {
            font-size: 14px;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .timer-value {
            font-size: 24px;
            font-weight: 700;
            font-family: monospace;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #fff);
            border-radius: 6px;
            transition: width 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shine 1.5s infinite;
        }

        .mining-machines {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .mining-machine {
            background: rgba(0,0,0,0.3);
            border-radius: 16px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .mining-machine.active {
            border-color: var(--success);
            animation: glowPulse 2s infinite;
        }

        .mining-machine-icon {
            font-size: 40px;
            margin-bottom: 10px;
            animation: spin 10s linear infinite;
        }

        .mining-machine-name {
            font-weight: 700;
            margin-bottom: 5px;
        }

        .mining-machine-power {
            color: var(--primary);
            font-size: 14px;
            margin-bottom: 5px;
        }

        .mining-machine-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-mining {
            background: var(--success);
            color: white;
            animation: pulse 1s infinite;
        }

        .status-idle {
            background: var(--warning);
            color: var(--dark);
        }

        .mining-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .stat-box {
            background: rgba(0,0,0,0.3);
            border-radius: 14px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-2px);
            background: rgba(0,0,0,0.4);
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--success);
        }

        .claim-btn {
            background: linear-gradient(145deg, var(--primary), var(--primary-dark));
            color: var(--secondary);
            border: none;
            padding: 16px 24px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 100%;
            box-shadow: 0 4px 15px rgba(229,197,140,0.2);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .claim-btn:not(:disabled) {
            animation: glowPulse 2s infinite;
        }

        .claim-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: linear-gradient(145deg, #666, #444);
            animation: none;
        }

        .claim-btn:disabled::before {
            content: 'â³';
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        .transaction-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 16px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            animation: slideInRight 0.3s ease;
        }

        .transaction-item:hover {
            transform: translateX(-5px);
            background: rgba(0,0,0,0.3);
        }

        .transaction-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, var(--primary), var(--primary-dark));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-left: 15px;
            color: var(--secondary);
            animation: rotateIn 0.5s ease;
        }

        .transaction-info {
            flex: 1;
        }

        .transaction-title {
            font-weight: 600;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .transaction-meta {
            display: flex;
            gap: 15px;
            font-size: 11px;
            opacity: 0.6;
        }

        .transaction-amount {
            font-weight: 700;
            font-size: 18px;
            padding: 0 15px;
        }

        .transaction-amount.positive { 
            color: var(--success);
            text-shadow: 0 0 10px rgba(46, 204, 113, 0.3);
        }
        
        .transaction-amount.negative { 
            color: var(--danger);
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            margin-right: 8px;
            animation: scaleIn 0.3s ease;
        }

        .status-pending {
            background: var(--warning);
            color: var(--dark);
            animation: pulse 1.5s infinite;
        }

        .status-approved {
            background: var(--success);
            color: white;
        }

        .status-rejected {
            background: var(--danger);
            color: white;
        }

        .status-active {
            background: var(--success);
            color: white;
        }

        .status-inactive {
            background: var(--warning);
            color: var(--dark);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 100px;
            padding: 12px;
            background: rgba(61,58,58,0.7);
            border: none;
            border-radius: 12px;
            color: var(--text);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: var(--primary);
            color: var(--secondary);
        }

        .notification-item {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .notification-item.unread {
            background: rgba(229,197,140,0.1);
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .notification-message {
            font-size: 13px;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .notification-time {
            font-size: 11px;
            opacity: 0.5;
        }

        .settings-list {
            background: rgba(61,58,58,0.7);
            border-radius: 18px;
            overflow: hidden;
        }

        .settings-item {
            display: flex;
            align-items: center;
            padding: 18px 20px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, var(--primary), var(--primary-dark));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 15px;
            font-size: 22px;
            color: var(--secondary);
        }

        .settings-content {
            flex: 1;
        }

        .settings-title {
            font-weight: 700;
            margin-bottom: 5px;
        }

        .settings-subtitle {
            font-size: 12px;
            opacity: 0.6;
        }

        .settings-value {
            color: var(--primary);
            font-weight: 600;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 15px;
            overflow: hidden;
            border: 3px solid var(--primary);
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .withdraw-address-item {
            background: rgba(0,0,0,0.2);
            border-radius: 14px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .address-info {
            flex: 1;
        }

        .address-type {
            font-size: 13px;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .address-value {
            font-family: monospace;
            font-size: 14px;
            color: var(--primary);
        }

        .address-actions {
            display: flex;
            gap: 8px;
        }

        .address-btn {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: var(--text-muted);
            padding: 5px;
        }

        .admin-message {
            background: linear-gradient(145deg, var(--primary), var(--primary-dark));
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 20px;
            color: var(--secondary);
            position: relative;
            animation: slideIn 0.3s ease;
        }

        .admin-message-title {
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .admin-message-content {
            font-size: 14px;
            line-height: 1.6;
        }

        .admin-message-close {
            position: absolute;
            top: 10px;
            left: 10px;
            background: none;
            border: none;
            color: var(--secondary);
            font-size: 20px;
            cursor: pointer;
            opacity: 0.7;
        }

        .banned-badge {
            background: var(--danger);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-right: 8px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            opacity: 0.6;
        }

        .empty-state span {
            font-size: 50px;
            display: block;
            margin-bottom: 15px;
        }

        .toast {
            position: fixed;
            bottom: 100px;
            left: 20px;
            right: 20px;
            background: rgba(45,42,42,0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 16px 20px;
            border-radius: 16px;
            border-right: 4px solid var(--primary);
            z-index: 9999;
            animation: slideUp 0.3s ease;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
        }

        .date-filter {
            background: rgba(0,0,0,0.3);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .date-range {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .date-input {
            flex: 1;
            min-width: 120px;
        }

        .hash-rate {
            font-family: monospace;
            font-size: 14px;
            color: var(--primary);
            direction: ltr;
        }

        .language-selector {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .lang-btn {
            flex: 1;
            padding: 8px;
            border: 2px solid var(--primary);
            background: transparent;
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lang-btn.active {
            background: var(--primary);
            color: var(--secondary);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            min-width: 80px;
        }

        .action-btn.approve {
            background: var(--success);
            color: white;
        }

        .action-btn.reject {
            background: var(--danger);
            color: white;
        }

        .action-btn.warning {
            background: var(--warning);
            color: var(--dark);
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .mining-active {
            animation: miningPulse 1.5s infinite;
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: 24px;
            }
            
            .balance-amount {
                font-size: 32px;
            }
            
            .timer-circle {
                width: 60px;
                height: 60px;
                font-size: 22px;
            }
            
            .timer-value {
                font-size: 18px;
            }
            
            .mining-machines {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-content">
            <div class="splash-logo">
                <span>â›½</span>
            </div>
            <h1 class="splash-title">OilMineX Pro</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… -->
    <div class="terms-screen" id="termsScreen">
        <div class="terms-container">
            <h2 class="terms-title" data-i18n="termsTitle">ğŸ“œ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</h2>
            <div class="terms-content">
                <p data-i18n="termsWelcome">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ OilMineX - Ù…Ù†ØµØ© ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù†ÙØ· Ø§Ù„Ø±Ù‚Ù…ÙŠØ©.</p>
                <p data-i18n="termsAgree">Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØµØ©ØŒ ÙØ¥Ù†Ùƒ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… Ø§Ù„ØªØ§Ù„ÙŠØ©:</p>
                <p data-i18n="terms1">1. ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù†ÙØ· Ø§Ù„Ø±Ù‚Ù…ÙŠ: ÙŠØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø¨Ø´ÙƒÙ„ Ø¢Ù„ÙŠ ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©ØŒ ÙˆÙŠØ­Ù‚ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ù„ØµØ±Ù Ø§Ù„Ø£Ø±Ø¨Ø§Ø­.</p>
                <p data-i18n="terms2">2. Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ÙˆØ§Ù„Ø³Ø­Ø¨: ØªØ®Ø¶Ø¹ Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ÙˆØ§Ù„Ø³Ø­Ø¨ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ù† Ù‚Ø¨Ù„ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©ØŒ ÙˆÙ‚Ø¯ ØªØ³ØªØºØ±Ù‚ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø­ØªÙ‰ 24 Ø³Ø§Ø¹Ø©.</p>
                <p data-i18n="terms3">3. Ø£Ù…Ø§Ù† Ø§Ù„Ø­Ø³Ø§Ø¨: Ø£Ù†Øª Ù…Ø³Ø¤ÙˆÙ„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ù† Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø³Ø±ÙŠØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ.</p>
                <p data-i18n="terms4">4. Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…: ÙŠÙ…Ù†Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ù†ØµØ© ÙÙŠ Ø£ÙŠ Ø£Ù†Ø´Ø·Ø© ØºÙŠØ± Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø£Ùˆ Ø§Ø­ØªÙŠØ§Ù„ÙŠØ©.</p>
                <p data-i18n="terms5">5. Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª: ØªØ·Ø¨Ù‚ Ø±Ø³ÙˆÙ… Ø¥Ø¯Ø§Ø±ÙŠØ© Ø¨Ù†Ø³Ø¨Ø© 2% Ø¹Ù„Ù‰ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø³Ø­Ø¨.</p>
                <p data-i18n="terms6">6. Ø§Ù„Ø­Ù‚ÙˆÙ‚: ØªØ­ØªÙØ¸ Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø§Ù„Ø­Ù‚ ÙÙŠ ØªØ¹Ù„ÙŠÙ‚ Ø£Ùˆ Ø¥Ù„ØºØ§Ø¡ Ø£ÙŠ Ø­Ø³Ø§Ø¨ ÙŠØ®Ø§Ù„Ù Ø§Ù„Ø´Ø±ÙˆØ·.</p>
                <p data-i18n="terms7">7. Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª: Ù‚Ø¯ ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· Ù…Ù† ÙˆÙ‚Øª Ù„Ø¢Ø®Ø±ØŒ ÙˆÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ØªØ§Ø¨Ø¹ØªÙ‡Ø§.</p>
                <p data-i18n="terms8">8. Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ: Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠØŒ ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.</p>
            </div>
            <div class="language-selector">
                <button class="lang-btn active" onclick="setLanguage('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                <button class="lang-btn" onclick="setLanguage('en')">ğŸ‡¬ğŸ‡§ English</button>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" style="flex: 2;" onclick="acceptTerms()">âœ… <span data-i18n="acceptTerms">Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ·</span></button>
                <button class="btn-outline" style="flex: 1;" onclick="logout()">âŒ <span data-i18n="reject">Ø±ÙØ¶</span></button>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div class="page-container active" id="homePage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
            <div class="header-icons">
                <div class="icon-btn" onclick="showPage('notificationsPage')">
                    <span>ğŸ””</span>
                    <span class="badge" id="notificationBadge" style="display: none;">0</span>
                </div>
                <div class="icon-btn" onclick="showPage('profilePage')">
                    <span>ğŸ‘¤</span>
                </div>
                <div class="icon-btn" onclick="toggleLanguageMenu()">
                    <span>ğŸŒ</span>
                </div>
            </div>
        </div>

        <div id="adminMessagesContainer"></div>

        <div class="balance-card">
            <div class="balance-header">
                <span class="balance-label" data-i18n="currentBalance">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ</span>
                <div style="display: flex; gap: 10px;">
                    <button class="eye-btn" onclick="updateUI()" title="ØªØ­Ø¯ÙŠØ«">ğŸ”„</button>
                    <button class="eye-btn" onclick="toggleBalanceVisibility()" id="toggleBalanceBtn">ğŸ‘ï¸</button>
                </div>
            </div>
            <div class="balance-amount" id="userBalance">0.00 <span class="balance-currency">$</span></div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù…Ø­Ø³Ù† -->
        <div class="card mining-section" id="miningSection">
            <div id="miningParticles"></div>
            <h3 style="margin-bottom: 15px; color: var(--primary); display: flex; align-items: center; gap: 10px;">
                <span>â›ï¸</span>
                <span data-i18n="liveMining">Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</span>
                <span class="hash-rate" id="hashRate">0 H/s</span>
            </h3>
            
            <!-- Ø¢Ù„Ø§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© -->
            <div class="mining-machines" id="miningMachines"></div>
            
            <div class="mining-progress">
                <div class="mining-timer">
                    <div class="timer-circle" id="miningTimer">0</div>
                    <div class="timer-info">
                        <div class="timer-label" data-i18n="timeRemaining">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</div>
                        <div class="timer-value" id="miningTimeLeft">00:00:00</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="miningProgress" style="width: 0%;"></div>
                </div>
                <div class="mining-stats">
                    <div class="stat-box">
                        <div class="stat-label" data-i18n="miningPower">Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</div>
                        <div class="stat-value" id="homeMiningPower">0 TH/s</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label" data-i18n="currentProfit">Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</div>
                        <div class="stat-value" id="homeCurrentProfit">0.00 $</div>
                    </div>
                </div>
                <button class="claim-btn" onclick="claimMiningRewards()" id="claimMiningBtn">
                    <span>âš¡</span>
                    <span data-i18n="claimRewards">ØµØ±Ù Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</span>
                </button>
            </div>
        </div>

        <!-- Ø¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª -->
        <div class="card">
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                <h3 style="color: var(--primary);" data-i18n="recentTransactions">ğŸ“‹ Ø¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</h3>
                <span style="color: var(--primary); cursor: pointer;" onclick="showPage('transactionsPage')">â† <span data-i18n="viewAll">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</span></span>
            </div>
            <div id="recentTransactions"></div>
        </div>

        <!-- Ø¨Ø§Ù‚Ø§Øª Ø³Ø±ÙŠØ¹Ø© -->
        <div class="card">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="suggestedPackages">ğŸ Ø¨Ø§Ù‚Ø§Øª Ù…Ù‚ØªØ±Ø­Ø©</h3>
            <div class="packages-grid">
                <div class="package-card" onclick="selectPackage('basic'); showPage('packagesPage')">
                    <div class="package-icon">ğŸ›¢ï¸</div>
                    <div class="package-name" data-i18n="basic">Ø£Ø³Ø§Ø³ÙŠØ©</div>
                    <div class="package-price">50 $</div>
                </div>
                <div class="package-card" onclick="selectPackage('silver'); showPage('packagesPage')">
                    <div class="package-icon">âš™ï¸</div>
                    <div class="package-name" data-i18n="silver">ÙØ¶ÙŠØ©</div>
                    <div class="package-price">200 $</div>
                </div>
                <div class="package-card" onclick="selectPackage('gold'); showPage('packagesPage')">
                    <div class="package-icon">ğŸ’</div>
                    <div class="package-name" data-i18n="gold">Ø°Ù‡Ø¨ÙŠØ©</div>
                    <div class="package-price">500 $</div>
                </div>
                <div class="package-card" onclick="selectPackage('platinum'); showPage('packagesPage')">
                    <div class="package-icon">ğŸ‘‘</div>
                    <div class="package-name" data-i18n="platinum">Ø¨Ù„Ø§ØªÙŠÙ†ÙŠØ©</div>
                    <div class="package-price">1000 $</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
    <div class="page-container" id="miningPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="miningPlatform">â›ï¸ Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</h2>
        </div>

        <div class="balance-card">
            <div class="balance-label" data-i18n="totalMiningPower">Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</div>
            <div class="balance-amount" id="miningTotalPower">0 <span class="balance-currency">TH/s</span></div>
        </div>

        <!-- Ø¢Ù„Ø§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù†Ø´Ø·Ø© -->
        <div class="card">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="activeMiners">âš™ï¸ Ø¢Ù„Ø§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù†Ø´Ø·Ø©</h3>
            <div id="activeMinersList"></div>
        </div>

        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© -->
        <div class="card">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="advancedStats">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</h3>
            <div class="mining-progress">
                <div class="mining-timer">
                    <div class="timer-circle" id="miningPageTimer">0</div>
                    <div class="timer-info">
                        <div class="timer-label" data-i18n="timeRemaining">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</div>
                        <div class="timer-value" id="miningPageTimeLeft">00:00:00</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="miningPageProgress" style="width: 0%;"></div>
                </div>
                <div class="mining-stats">
                    <div class="stat-box">
                        <div class="stat-label" data-i18n="dailyProfit">Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</div>
                        <div class="stat-value" id="miningDailyProfit">0.00 $</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label" data-i18n="currentProfit">Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</div>
                        <div class="stat-value" id="miningCurrentProfit">0.00 $</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label" data-i18n="totalProfit">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</div>
                        <div class="stat-value" id="miningTotalProfit">0.00 $</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label" data-i18n="lastClaim">Ø¢Ø®Ø± ØµØ±Ù</div>
                        <div class="stat-value" id="lastMiningClaim">-</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label" data-i18n="miningSpeed">Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</div>
                        <div class="stat-value" id="miningSpeed">0 H/s</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label" data-i18n="minedBlocks">Ø§Ù„ÙƒØªÙ„ Ø§Ù„Ù…ÙØ¹Ø¯Ù†Ø©</div>
                        <div class="stat-value" id="minedBlocks">0</div>
                    </div>
                </div>
                <button class="claim-btn" onclick="claimMiningRewards()" id="miningClaimBtn">
                    <span>âš¡</span>
                    <span data-i18n="claimNow">ØµØ±Ù Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø¢Ù†</span>
                </button>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
    <div class="page-container" id="packagesPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="miningPackages">ğŸ“¦ Ø¨Ø§Ù‚Ø§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</h2>
        </div>

        <div class="balance-card">
            <div class="balance-label" data-i18n="yourBalance">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
            <div class="balance-amount" id="packagesBalance">0.00 <span class="balance-currency">$</span></div>
        </div>

        <div class="packages-grid" id="allPackages"></div>

        <!-- ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
        <div class="card" id="packageDetails" style="display: none; animation: scaleIn 0.3s ease;">
            <h3 style="margin-bottom: 15px; color: var(--primary);" id="selectedPackageTitle">Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
            <div style="background: rgba(0,0,0,0.2); border-radius: 16px; padding: 20px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                    <span>âš¡ <span data-i18n="miningPower">Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</span>:</span>
                    <span style="font-weight: 700;" id="selectedPackagePower">5 TH/s</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                    <span>ğŸ’° <span data-i18n="price">Ø§Ù„Ø³Ø¹Ø±</span>:</span>
                    <span style="font-weight: 700; color: var(--primary);" id="selectedPackagePrice">50 $</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                    <span>ğŸ“ˆ <span data-i18n="dailyProfit">Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</span>:</span>
                    <span style="font-weight: 700; color: var(--success);" id="selectedPackageDaily">0.50 $</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 12px 0;">
                    <span>â³ <span data-i18n="contractDuration">Ù…Ø¯Ø© Ø§Ù„Ø¹Ù‚Ø¯</span>:</span>
                    <span style="font-weight: 700;" data-i18n="unlimited">ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯</span>
                </div>
            </div>
            <button class="btn" onclick="purchasePackage()">
                <span>ğŸ›’</span>
                <span data-i18n="buyPackage">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø©</span>
            </button>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ -->
    <div class="page-container" id="depositPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="deposit">ğŸ’° Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ø±ØµÙŠØ¯</h2>
        </div>

        <div class="card">
            <div class="tabs">
                <button class="tab active" onclick="switchPaymentTab('trc20', this)">ğŸ’ TRC20</button>
                <button class="tab" onclick="switchPaymentTab('bep20', this)">ğŸ”· BEP20</button>
                <button class="tab" onclick="switchPaymentTab('erc20', this)">ğŸ’  ERC20</button>
            </div>

            <!-- TRC20 -->
            <div id="trc20Payment">
                <div class="input-group">
                    <label class="input-label" data-i18n="amount">Ø§Ù„Ù…Ø¨Ù„Øº (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 10 $)</label>
                    <input type="number" class="input-field" id="trc20Amount" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº" min="10" step="10">
                </div>

                <div style="background: rgba(30,28,28,0.7); border-radius: 16px; padding: 20px; text-align: center; margin-bottom: 20px;">
                    <div style="margin-bottom: 15px; font-size: 14px; opacity: 0.8;" data-i18n="usdtAddress">Ø¹Ù†ÙˆØ§Ù† USDT (TRC20)</div>
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; font-family: monospace; word-break: break-all; margin-bottom: 15px;" id="trc20Address">
                        TXq8Xk5Kz2x8cZkL9mNpQrVsYwXzAbCdEfGhIjK
                    </div>
                    <button class="btn-outline btn-sm" onclick="copyAddress('trc20')">ğŸ“‹ <span data-i18n="copyAddress">Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span></button>
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="txid">Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© (TxID)</label>
                    <input type="text" class="input-field" id="trc20TxId" placeholder="Ø£Ø¯Ø®Ù„ TxID">
                </div>

                <button class="btn" onclick="submitDeposit('trc20')"><span data-i18n="submitDeposit">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</span></button>
            </div>

            <!-- BEP20 -->
            <div id="bep20Payment" style="display: none;">
                <div class="input-group">
                    <label class="input-label" data-i18n="amount">Ø§Ù„Ù…Ø¨Ù„Øº (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 10 $)</label>
                    <input type="number" class="input-field" id="bep20Amount" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº" min="10" step="10">
                </div>

                <div style="background: rgba(30,28,28,0.7); border-radius: 16px; padding: 20px; text-align: center; margin-bottom: 20px;">
                    <div style="margin-bottom: 15px; font-size: 14px; opacity: 0.8;" data-i18n="usdtAddressBep20">Ø¹Ù†ÙˆØ§Ù† USDT (BEP20)</div>
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; font-family: monospace; word-break: break-all; margin-bottom: 15px;" id="bep20Address">
                        0x8a5e2a634f8b8f8b8f8b8f8b8f8b8f8b8f8b8f8b
                    </div>
                    <button class="btn-outline btn-sm" onclick="copyAddress('bep20')">ğŸ“‹ <span data-i18n="copyAddress">Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span></button>
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="txid">Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© (TxID)</label>
                    <input type="text" class="input-field" id="bep20TxId" placeholder="Ø£Ø¯Ø®Ù„ TxID">
                </div>

                <button class="btn" onclick="submitDeposit('bep20')"><span data-i18n="submitDeposit">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</span></button>
            </div>

            <!-- ERC20 -->
            <div id="erc20Payment" style="display: none;">
                <div class="input-group">
                    <label class="input-label" data-i18n="amount">Ø§Ù„Ù…Ø¨Ù„Øº (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 20 $)</label>
                    <input type="number" class="input-field" id="erc20Amount" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº" min="20" step="10">
                </div>

                <div style="background: rgba(30,28,28,0.7); border-radius: 16px; padding: 20px; text-align: center; margin-bottom: 20px;">
                    <div style="margin-bottom: 15px; font-size: 14px; opacity: 0.8;" data-i18n="usdtAddressErc20">Ø¹Ù†ÙˆØ§Ù† USDT (ERC20)</div>
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; font-family: monospace; word-break: break-all; margin-bottom: 15px;" id="erc20Address">
                        0x1234567890abcdef1234567890abcdef12345678
                    </div>
                    <button class="btn-outline btn-sm" onclick="copyAddress('erc20')">ğŸ“‹ <span data-i18n="copyAddress">Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span></button>
                </div>

                <div class="input-group">
                    <label class="input-label" data-i18n="txid">Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© (TxID)</label>
                    <input type="text" class="input-field" id="erc20TxId" placeholder="Ø£Ø¯Ø®Ù„ TxID">
                </div>

                <button class="btn" onclick="submitDeposit('erc20')"><span data-i18n="submitDeposit">Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</span></button>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø³Ø­Ø¨ -->
    <div class="page-container" id="withdrawPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="withdraw">ğŸ’¸ Ø³Ø­Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h2>
        </div>

        <div class="balance-card">
            <div class="balance-label" data-i18n="withdrawableBalance">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø³Ø­Ø¨</div>
            <div class="balance-amount" id="withdrawBalance">0.00 <span class="balance-currency">$</span></div>
        </div>

        <!-- Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© -->
        <div class="card">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="savedAddresses">ğŸ“‡ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h3>
            <div id="savedAddresses"></div>
            <button class="btn-outline btn-sm" onclick="showAddAddressForm()" style="margin-top: 10px;">â• <span data-i18n="addAddress">Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯</span></button>
        </div>

        <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯ -->
        <div class="card" id="addAddressForm" style="display: none; animation: slideInRight 0.3s ease;">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="addNewAddress">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯</h3>
            <div class="input-group">
                <label class="input-label" data-i18n="networkType">Ù†ÙˆØ¹ Ø§Ù„Ø´Ø¨ÙƒØ©</label>
                <select class="input-field" id="newAddressNetwork">
                    <option value="trc20">TRC20</option>
                    <option value="bep20">BEP20</option>
                    <option value="erc20">ERC20</option>
                </select>
            </div>
            <div class="input-group">
                <label class="input-label" data-i18n="address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
                <input type="text" class="input-field" id="newAddress" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn" style="flex:2;" onclick="saveWithdrawAddress()">ğŸ’¾ <span data-i18n="saveAddress">Ø­ÙØ¸ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span></button>
                <button class="btn-outline" style="flex:1;" onclick="cancelAddAddress()">âŒ <span data-i18n="cancel">Ø¥Ù„ØºØ§Ø¡</span></button>
            </div>
        </div>

        <!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø³Ø­Ø¨ -->
        <div class="card">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="newWithdrawRequest">ğŸ’° Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
            
            <div class="input-group">
                <label class="input-label" data-i18n="selectAddress">Ø§Ø®ØªØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³Ø­Ø¨</label>
                <select class="input-field" id="withdrawAddressSelect" onchange="updateWithdrawAddress()">
                    <option value="" data-i18n="chooseAddress">Ø§Ø®ØªØ± Ø¹Ù†ÙˆØ§Ù†...</option>
                </select>
            </div>

            <div class="input-group">
                <label class="input-label" data-i18n="amount">Ø§Ù„Ù…Ø¨Ù„Øº (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 10 $)</label>
                <input type="number" class="input-field" id="withdrawAmount" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº" min="10" step="10">
            </div>

            <div class="input-group">
                <label class="input-label" data-i18n="securityCode">ğŸ” Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù†</label>
                <input type="password" class="input-field" id="securityCode" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù†" maxlength="6">
                <small style="color: var(--text-muted);" data-i18n="securityCodeHint">Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù…</small>
            </div>

            <button class="btn" onclick="verifyAndSubmitWithdraw()">ğŸ” <span data-i18n="confirmWithdraw">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø³Ø­Ø¨</span></button>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ù„Ù„Ø£Ø¯Ù…Ù†) -->
    <div class="page-container" id="adminPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="adminPanel">ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
            <div class="header-icons">
                <div class="icon-btn" onclick="updateAdminPanel()">
                    <span>ğŸ”„</span>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchAdminTab('deposits', this)">ğŸ’° <span data-i18n="deposits">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</span></button>
            <button class="tab" onclick="switchAdminTab('withdrawals', this)">ğŸ’¸ <span data-i18n="withdrawals">Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</span></button>
            <button class="tab" onclick="switchAdminTab('history', this)">ğŸ“‹ <span data-i18n="history">Ø§Ù„Ø³Ø¬Ù„</span></button>
            <button class="tab" onclick="switchAdminTab('users', this)">ğŸ‘¥ <span data-i18n="users">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</span></button>
            <button class="tab" onclick="switchAdminTab('messages', this)">ğŸ“¨ <span data-i18n="messages">Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</span></button>
            <button class="tab" onclick="switchAdminTab('referrals', this)">ğŸ¤ <span data-i18n="referrals">Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</span></button>
            <button class="tab" onclick="switchAdminTab('rewards', this)">ğŸ <span data-i18n="rewards">Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</span></button>
        </div>

        <!-- Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ -->
        <div id="adminDeposits">
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="pendingDeposits">â³ Ø·Ù„Ø¨Ø§Øª Ø¥ÙŠØ¯Ø§Ø¹ Ù…Ø¹Ù„Ù‚Ø©</h3>
                <div id="pendingDepositsList"></div>
            </div>
        </div>

        <!-- Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨ -->
        <div id="adminWithdrawals" style="display: none;">
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="pendingWithdrawals">â³ Ø·Ù„Ø¨Ø§Øª Ø³Ø­Ø¨ Ù…Ø¹Ù„Ù‚Ø©</h3>
                <div id="pendingWithdrawalsList"></div>
            </div>
        </div>

        <!-- Ø³Ø¬Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
        <div id="adminHistory" style="display: none;">
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="allRequests">ğŸ“‹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
                <div id="allRequestsList"></div>
            </div>
        </div>

        <!-- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
        <div id="adminUsers" style="display: none;">
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="usersList">ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 12px; margin-bottom: 15px; text-align: center;">
                    <span style="font-size: 24px;">ğŸ‘¥</span>
                    <span style="font-size: 18px; font-weight: 700;"> <span data-i18n="totalUsers">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</span>: <span id="totalUsersCount">0</span></span>
                </div>
                <div id="usersList"></div>
            </div>
        </div>

        <!-- Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© -->
        <div id="adminMessages" style="display: none;">
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="sendMessage">ğŸ“¨ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
                <div class="input-group">
                    <label class="input-label" data-i18n="messageTitle">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©</label>
                    <input type="text" class="input-field" id="messageTitle" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©">
                </div>
                <div class="input-group">
                    <label class="input-label" data-i18n="messageContent">Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</label>
                    <textarea class="input-field" id="messageContent" rows="4" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©"></textarea>
                </div>
                <button class="btn" onclick="sendMessageToAll()">ğŸ“¨ <span data-i18n="sendToAll">Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¬Ù…ÙŠØ¹</span></button>
            </div>
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="sentMessages">ğŸ“‹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</h3>
                <div id="sentMessagesList"></div>
            </div>
        </div>

        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª -->
        <div id="adminReferrals" style="display: none;">
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="manageReferrals">ğŸ¤ Ø¥Ø¯Ø§Ø±Ø© Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</h3>
                <div class="input-group">
                    <label class="input-label" data-i18n="selectUser">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                    <select class="input-field" id="referralUserSelect">
                        <option value="" data-i18n="chooseUser">Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…...</option>
                    </select>
                </div>
                <div class="input-group">
                    <label class="input-label" data-i18n="commissionAmount">Ù…Ø¨Ù„Øº Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</label>
                    <input type="number" class="input-field" id="referralAmount" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº" step="0.01">
                </div>
                <div class="input-group">
                    <label class="input-label" data-i18n="notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
                    <input type="text" class="input-field" id="referralNote" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§Øª">
                </div>
                <button class="btn" onclick="addReferralCommission()">ğŸ’° <span data-i18n="addCommission">Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙˆÙ„Ø© Ø¥Ø­Ø§Ù„Ø©</span></button>
            </div>
        </div>

        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª -->
        <div id="adminRewards" style="display: none;">
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="loginReward">ğŸ Ù…ÙƒØ§ÙØ£Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
                <div class="input-group">
                    <label class="input-label" data-i18n="rewardAmount">Ù…Ø¨Ù„Øº Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© ($)</label>
                    <input type="number" class="input-field" id="loginRewardAmount" value="1.00" step="0.1" min="0">
                </div>
                <button class="btn" onclick="giveLoginRewardToAll()">ğŸ <span data-i18n="giveLoginReward">Ù…Ù†Ø­ Ù…ÙƒØ§ÙØ£Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¬Ù…ÙŠØ¹</span></button>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="referralReward">ğŸ¤ Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</h3>
                <div class="input-group">
                    <label class="input-label" data-i18n="rewardAmount">Ù…Ø¨Ù„Øº Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© ($)</label>
                    <input type="number" class="input-field" id="referralRewardAmount" value="5.00" step="0.1" min="0">
                </div>
                <button class="btn" onclick="giveReferralRewardToAll()">ğŸ¤ <span data-i18n="giveReferralReward">Ù…Ù†Ø­ Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹</span></button>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="customReward">ğŸ¯ Ù…ÙƒØ§ÙØ£Ø© Ù…Ø®ØµØµØ©</h3>
                <div class="input-group">
                    <label class="input-label" data-i18n="selectUser">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                    <select class="input-field" id="customRewardUserSelect">
                        <option value="" data-i18n="chooseUser">Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…...</option>
                    </select>
                </div>
                <div class="input-group">
                    <label class="input-label" data-i18n="rewardAmount">Ù…Ø¨Ù„Øº Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© ($)</label>
                    <input type="number" class="input-field" id="customRewardAmount" step="0.1" min="0">
                </div>
                <div class="input-group">
                    <label class="input-label" data-i18n="rewardReason">Ø³Ø¨Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©</label>
                    <input type="text" class="input-field" id="customRewardReason" placeholder="Ø£Ø¯Ø®Ù„ Ø³Ø¨Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©">
                </div>
                <button class="btn" onclick="giveCustomReward()">ğŸ <span data-i18n="giveReward">Ù…Ù†Ø­ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©</span></button>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø¹ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© -->
    <div class="page-container" id="settingsPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="settings">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
        </div>

        <div class="settings-list">
            <div class="settings-item" onclick="showLanguageSelector()">
                <div class="settings-icon">ğŸŒ</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="language">Ø§Ù„Ù„ØºØ©</div>
                    <div class="settings-subtitle" id="currentLanguage">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
                </div>
                <div class="settings-value">â†</div>
            </div>

            <div class="settings-item" onclick="showPage('profilePage')">
                <div class="settings-icon">ğŸ‘¤</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="profile">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</div>
                    <div class="settings-subtitle" data-i18n="viewEditProfile">Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ</div>
                </div>
                <div class="settings-value">â†</div>
            </div>

            <div class="settings-item" onclick="showPage('transactionsPage')">
                <div class="settings-icon">ğŸ“Š</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="transactions">Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</div>
                    <div class="settings-subtitle" data-i18n="transactionHistory">Ø³Ø¬Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</div>
                </div>
                <div class="settings-value">â†</div>
            </div>

            <div class="settings-item" onclick="showSecuritySettings()">
                <div class="settings-icon">ğŸ”</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="securityCode">Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù†</div>
                    <div class="settings-subtitle" id="securityCodeStatus">ØºÙŠØ± Ù…ÙØ¹Ù„</div>
                </div>
                <div class="settings-value"><span data-i18n="change">ØªØºÙŠÙŠØ±</span></div>
            </div>

            <div class="settings-item" onclick="toggleNotifications()">
                <div class="settings-icon">ğŸ””</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="notifications">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</div>
                    <div class="settings-subtitle" id="notificationsStatus">Ù…ÙØ¹Ù„Ø©</div>
                </div>
                <div class="settings-value"><span data-i18n="change">ØªØºÙŠÙŠØ±</span></div>
            </div>

            <div class="settings-item" id="adminMenuItem" style="display: none;" onclick="showPage('adminPage')">
                <div class="settings-icon">âš¡</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="adminPanel">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</div>
                    <div class="settings-subtitle" data-i18n="manageRequests">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                </div>
                <div class="settings-value">â†</div>
            </div>

            <div class="settings-item" onclick="contactSupport()">
                <div class="settings-icon">ğŸ“</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="support">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</div>
                    <div class="settings-subtitle" data-i18n="contactTeam">Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚</div>
                </div>
                <div class="settings-value"><span data-i18n="contact">ØªÙˆØ§ØµÙ„</span></div>
            </div>

            <div class="settings-item" onclick="showTerms()">
                <div class="settings-icon">ğŸ“„</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="terms">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</div>
                    <div class="settings-subtitle" data-i18n="readTerms">Ù‚Ø±Ø§Ø¡Ø© Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</div>
                </div>
                <div class="settings-value"><span data-i18n="view">Ø¹Ø±Ø¶</span></div>
            </div>

            <div class="settings-item" onclick="logout()">
                <div class="settings-icon">ğŸšª</div>
                <div class="settings-content">
                    <div class="settings-title" data-i18n="logout">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
                    <div class="settings-subtitle" data-i18n="exitApp">Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</div>
                </div>
                <div class="settings-value"><span data-i18n="exit">Ø®Ø±ÙˆØ¬</span></div>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ -->
    <div class="page-container" id="profilePage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="profile">ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h2>
        </div>

        <div style="text-align: center; margin-bottom: 25px;">
            <div class="profile-avatar" id="profileAvatar">
                <img id="profileImage" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            </div>
            <h3 id="profileName" style="font-size: 24px; margin-bottom: 5px;">Ù…Ø³ØªØ®Ø¯Ù…</h3>
            <div id="profileId" style="color: var(--primary);">ID: ...</div>
            <div id="profileBannedStatus" style="display: none;" class="banned-badge">ğŸš« <span data-i18n="banned">Ù…Ø­Ø¸ÙˆØ±</span></div>
        </div>

        <div class="card">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="basicInfo">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                <span>ğŸ‘¤ <span data-i18n="username">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</span></span>
                <span id="profileUsername" style="color: var(--primary);">-</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                <span>ğŸ†” <span data-i18n="telegramId">Ù…Ø¹Ø±Ù ØªÙ„ÙŠØ¬Ø±Ø§Ù…</span></span>
                <span id="profileTelegramId" style="color: var(--primary);">-</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                <span>ğŸ“… <span data-i18n="joinDate">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</span></span>
                <span id="profileJoinDate" style="color: var(--primary);">-</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px 0;">
                <span>â° <span data-i18n="lastActive">Ø¢Ø®Ø± Ù†Ø´Ø§Ø·</span></span>
                <span id="profileLastActive" style="color: var(--primary);"><span data-i18n="now">Ø§Ù„Ø¢Ù†</span></span>
            </div>
        </div>

        <div class="card">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="statistics">Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                <span>ğŸ’° <span data-i18n="totalDeposits">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</span></span>
                <span id="profileTotalDeposits" style="color: var(--success);">0.00 $</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                <span>ğŸ’¸ <span data-i18n="totalWithdrawals">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª</span></span>
                <span id="profileTotalWithdrawals" style="color: var(--warning);">0.00 $</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--border);">
                <span>â›ï¸ <span data-i18n="totalProfit">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</span></span>
                <span id="profileTotalProfit" style="color: var(--success);">0.00 $</span>
            </div>
            <div style="display: flex; justify-content: space-between; padding: 12px 0;">
                <span>ğŸ“¦ <span data-i18n="packagesCount">Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</span></span>
                <span id="profileTotalPackages" style="color: var(--primary);">0</span>
            </div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ ÙÙ„ØªØ±Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® -->
    <div class="page-container" id="transactionsPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="transactions">ğŸ“‹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</h2>
        </div>

        <div class="card">
            <!-- ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ® -->
            <div class="date-filter">
                <h4 style="margin-bottom: 10px; color: var(--primary);" data-i18n="dateFilter">ğŸ” ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®</h4>
                <div class="date-range">
                    <div class="date-input">
                        <label class="input-label" data-i18n="from">Ù…Ù†</label>
                        <input type="date" class="input-field" id="dateFrom" onchange="filterTransactionsByDate()">
                    </div>
                    <div class="date-input">
                        <label class="input-label" data-i18n="to">Ø¥Ù„Ù‰</label>
                        <input type="date" class="input-field" id="dateTo" onchange="filterTransactionsByDate()">
                    </div>
                    <button class="btn-outline btn-sm" onclick="resetDateFilter()" style="margin-top: 20px;">â†º <span data-i18n="reset">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</span></button>
                </div>
            </div>

            <!-- Ø£Ø²Ø±Ø§Ø± ÙÙ„ØªØ±Ø© Ø§Ù„Ù†ÙˆØ¹ -->
            <div style="display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap;" id="transactionFilters">
                <button class="btn-outline btn-sm active" style="flex:1" onclick="filterTransactions('all', this)"><span data-i18n="all">Ø§Ù„ÙƒÙ„</span></button>
                <button class="btn-outline btn-sm" style="flex:1" onclick="filterTransactions('deposit', this)">ğŸ’° <span data-i18n="deposit">Ø¥ÙŠØ¯Ø§Ø¹</span></button>
                <button class="btn-outline btn-sm" style="flex:1" onclick="filterTransactions('withdraw', this)">ğŸ’¸ <span data-i18n="withdraw">Ø³Ø­Ø¨</span></button>
                <button class="btn-outline btn-sm" style="flex:1" onclick="filterTransactions('mining', this)">â›ï¸ <span data-i18n="mining">ØªØ¹Ø¯ÙŠÙ†</span></button>
                <button class="btn-outline btn-sm" style="flex:1" onclick="filterTransactions('package', this)">ğŸ“¦ <span data-i18n="package">Ø¨Ø§Ù‚Ø©</span></button>
                <button class="btn-outline btn-sm" style="flex:1" onclick="filterTransactions('referral', this)">ğŸ¤ <span data-i18n="referral">Ø¥Ø­Ø§Ù„Ø©</span></button>
            </div>

            <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø© -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 10px; text-align: center;">
                    <div style="font-size: 12px; opacity: 0.7;" data-i18n="totalTransactions">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</div>
                    <div style="font-size: 18px; font-weight: 700; color: var(--primary);" id="totalTransactionsCount">0</div>
                </div>
                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 10px; text-align: center;">
                    <div style="font-size: 12px; opacity: 0.7;" data-i18n="totalAmount">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº</div>
                    <div style="font-size: 18px; font-weight: 700; color: var(--success);" id="totalTransactionsAmount">0.00 $</div>
                </div>
            </div>

            <div id="allTransactionsList"></div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div class="page-container" id="notificationsPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="notifications">ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h2>
            <button class="btn-outline btn-sm" onclick="markAllAsRead()"><span data-i18n="markAllRead">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡</span></button>
        </div>

        <div class="card">
            <div id="notificationsList"></div>
        </div>
    </div>

    <!-- ØµÙØ­Ø© Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø³Ù†Ø© -->
    <div class="page-container" id="teamPage">
        <div class="page-header">
            <h2 class="page-title" data-i18n="myTeam">ğŸ‘¥ ÙØ±ÙŠÙ‚ÙŠ</h2>
        </div>

        <div class="balance-card">
            <div class="balance-label" data-i18n="totalReferralProfit">Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</div>
            <div class="balance-amount" id="teamTotalProfit">0.00 <span class="balance-currency">$</span></div>
            <div style="margin-top: 15px; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; text-align: center;">
                <div style="font-size: 12px; margin-bottom: 5px;" data-i18n="yourReferralLink">Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</div>
                <div style="font-family: monospace; color: var(--primary); font-size: 14px; margin-bottom: 10px;" id="referralLink">...</div>
                <button class="btn-outline btn-sm" onclick="copyReferralLink()">ğŸ“‹ <span data-i18n="copyLink">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</span></button>
            </div>
        </div>

        <div class="card">
            <h3 style="margin-bottom: 15px; color: var(--primary);" data-i18n="teamStatistics">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ±ÙŠÙ‚</h3>
            <div class="mining-stats">
                <div class="stat-box">
                    <div class="stat-label" data-i18n="totalTeam">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚</div>
                    <div class="stat-value" id="totalTeamCount">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label" data-i18n="activeMembers">Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</div>
                    <div class="stat-value" id="activeTeamCount">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label" data-i18n="inactiveMembers">Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·ÙŠÙ†</div>
                    <div class="stat-value" id="inactiveTeamCount">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label" data-i18n="totalUsers">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                    <div class="stat-value" id="globalUserCount">0</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="tabs">
                <button class="tab active" onclick="switchTeamTab('A', this)"><span data-i18n="levelA">Ù…Ø³ØªÙˆÙ‰ A</span> (10%)</button>
                <button class="tab" onclick="switchTeamTab('B', this)"><span data-i18n="levelB">Ù…Ø³ØªÙˆÙ‰ B</span> (5%)</button>
                <button class="tab" onclick="switchTeamTab('C', this)"><span data-i18n="levelC">Ù…Ø³ØªÙˆÙ‰ C</span> (3%)</button>
                <button class="tab" onclick="switchTeamTab('D', this)"><span data-i18n="levelD">Ù…Ø³ØªÙˆÙ‰ D</span> (1%)</button>
            </div>
            
            <div id="teamMembersList"></div>
        </div>
    </div>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="navigateTo('homePage', this)">
            <span>ğŸ </span>
            <span data-i18n="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </div>
        <div class="nav-item" onclick="navigateTo('miningPage', this)">
            <span>â›ï¸</span>
            <span data-i18n="mining">Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</span>
        </div>
        <div class="nav-item" onclick="navigateTo('packagesPage', this)">
            <span>ğŸ“¦</span>
            <span data-i18n="packages">Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</span>
        </div>
        <div class="nav-item" onclick="navigateTo('teamPage', this); updateTeamPage();">
            <span>ğŸ‘¥</span>
            <span data-i18n="team">Ø§Ù„ÙØ±ÙŠÙ‚</span>
        </div>
        <div class="nav-item" onclick="navigateTo('depositPage', this)">
            <span>ğŸ’°</span>
            <span data-i18n="deposit">Ø¥ÙŠØ¯Ø§Ø¹</span>
        </div>
        <div class="nav-item" onclick="navigateTo('withdrawPage', this)">
            <span>ğŸ’¸</span>
            <span data-i18n="withdraw">Ø³Ø­Ø¨</span>
        </div>
        <div class="nav-item" onclick="navigateTo('settingsPage', this)">
            <span>âš™ï¸</span>
            <span data-i18n="settings">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</span>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
    <div id="languageSelectorModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10001; align-items: center; justify-content: center;">
        <div style="background: var(--secondary); border-radius: 30px; padding: 30px; max-width: 300px; width: 90%; border: 2px solid var(--primary);">
            <h3 style="color: var(--primary); margin-bottom: 20px; text-align: center;" data-i18n="selectLanguage">Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©</h3>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button class="btn" onclick="setLanguage('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                <button class="btn-outline" onclick="setLanguage('en')">ğŸ‡¬ğŸ‡§ English</button>
                <button class="btn-outline" onclick="closeLanguageSelector()" style="margin-top: 10px;" data-i18n="close">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // ==================== Ø¥Ø¹Ø¯Ø§Ø¯ Supabase ====================
        const SUPABASE_URL = 'https://ljjrpvxobhyatqyvcahb.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxqanJwdnhvYmh5YXRxeXZjYWhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE3MzA3MzAsImV4cCI6MjA4NzMwNjczMH0.uqLxVtdnXkxzxUwmkDoRe_1vuXDw0EiaowHwE3Dz6t8';
        
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // ==================== Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ====================
        const BOT_TOKEN = '7529270511:AAHofASlPZaLj5OhmlTBjeWIPbcsI0wvDVM';
        const ADMIN_IDS = ['5584938116'];
        
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();
        
        // ==================== ØªØ¹Ø¯ÙŠÙ„ Ù„Ù„Ø¹Ù…Ù„ Ù…Ø¹ GitHub Pages ====================
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
            tg.ready();
        } else {
            console.log('Running outside Telegram');
            // Ù…Ø­Ø§ÙƒØ§Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„ØªØ¬Ø±Ø¨Ø© Ø®Ø§Ø±Ø¬ ØªÙ„ÙŠØ¬Ø±Ø§Ù…
            window.tg = {
                initDataUnsafe: {
                    user: {
                        id: 123456789,
                        first_name: 'Test',
                        username: 'test_user',
                        language_code: 'ar'
                    }
                },
                expand: function() {},
                ready: function() {},
                close: function() { alert('Closing app...'); }
            };
        }
        // ==================== Ù…ØªØºÙŠØ±Ø§Øª Ø¹Ø§Ù…Ø© ====================
        let currentUser = null;
        let selectedPackage = 'basic';
        let miningInterval = null;
        let updateInterval = null;
        let miningEffectInterval = null;
        let balanceVisible = true;
        let adminMessages = [];
        const REFERRAL_RATES = { A: 0.10, B: 0.05, C: 0.03, D: 0.01 };
        let currentTeamLevel = 'A';
        let currentLanguage = 'ar';
        let fakeHashRate = 0;
        let fakeMinedBlocks = 0;

        // ==================== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ±Ø¬Ù…Ø© ====================
        const translations = {
            ar: {
                home: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
                mining: 'Ø§Ù„ØªØ¹Ø¯ÙŠÙ†',
                packages: 'Ø§Ù„Ø¨Ø§Ù‚Ø§Øª',
                team: 'Ø§Ù„ÙØ±ÙŠÙ‚',
                deposit: 'Ø¥ÙŠØ¯Ø§Ø¹',
                withdraw: 'Ø³Ø­Ø¨',
                settings: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
                profile: 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ',
                transactions: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª',
                notifications: 'Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',
                language: 'Ø§Ù„Ù„ØºØ©',
                currentBalance: 'Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ',
                liveMining: 'Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù…Ø¨Ø§Ø´Ø±',
                timeRemaining: 'Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ',
                miningPower: 'Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†',
                currentProfit: 'Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø­Ø§Ù„ÙŠØ©',
                claimRewards: 'ØµØ±Ù Ø§Ù„Ø£Ø±Ø¨Ø§Ø­',
                recentTransactions: 'Ø¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª',
                viewAll: 'Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„',
                suggestedPackages: 'Ø¨Ø§Ù‚Ø§Øª Ù…Ù‚ØªØ±Ø­Ø©',
                basic: 'Ø£Ø³Ø§Ø³ÙŠØ©',
                silver: 'ÙØ¶ÙŠØ©',
                gold: 'Ø°Ù‡Ø¨ÙŠØ©',
                platinum: 'Ø¨Ù„Ø§ØªÙŠÙ†ÙŠØ©',
                yourBalance: 'Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ',
                price: 'Ø§Ù„Ø³Ø¹Ø±',
                dailyProfit: 'Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©',
                contractDuration: 'Ù…Ø¯Ø© Ø§Ù„Ø¹Ù‚Ø¯',
                unlimited: 'ØºÙŠØ± Ù…Ø­Ø¯ÙˆØ¯',
                buyPackage: 'Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø©',
                miningPlatform: 'Ù…Ù†ØµØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†',
                totalMiningPower: 'Ù‚ÙˆØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©',
                activeMiners: 'Ø¢Ù„Ø§Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù†Ø´Ø·Ø©',
                advancedStats: 'Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù…Ø©',
                totalProfit: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­',
                lastClaim: 'Ø¢Ø®Ø± ØµØ±Ù',
                miningSpeed: 'Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†',
                minedBlocks: 'Ø§Ù„ÙƒØªÙ„ Ø§Ù„Ù…ÙØ¹Ø¯Ù†Ø©',
                claimNow: 'ØµØ±Ù Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø¢Ù†',
                dateFilter: 'ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„ØªØ§Ø±ÙŠØ®',
                from: 'Ù…Ù†',
                to: 'Ø¥Ù„Ù‰',
                reset: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†',
                all: 'Ø§Ù„ÙƒÙ„',
                totalTransactions: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª',
                totalAmount: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº',
                myTeam: 'ÙØ±ÙŠÙ‚ÙŠ',
                totalReferralProfit: 'Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©',
                yourReferralLink: 'Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ',
                copyLink: 'Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·',
                teamStatistics: 'Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ±ÙŠÙ‚',
                totalTeam: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±ÙŠÙ‚',
                activeMembers: 'Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„Ù†Ø´Ø·ÙŠÙ†',
                inactiveMembers: 'Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·ÙŠÙ†',
                levelA: 'Ù…Ø³ØªÙˆÙ‰ A',
                levelB: 'Ù…Ø³ØªÙˆÙ‰ B',
                levelC: 'Ù…Ø³ØªÙˆÙ‰ C',
                levelD: 'Ù…Ø³ØªÙˆÙ‰ D',
                securityCode: 'Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù†',
                support: 'Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ',
                contactTeam: 'Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚',
                contact: 'ØªÙˆØ§ØµÙ„',
                terms: 'Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…',
                readTerms: 'Ù‚Ø±Ø§Ø¡Ø© Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',
                view: 'Ø¹Ø±Ø¶',
                logout: 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬',
                exitApp: 'Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',
                exit: 'Ø®Ø±ÙˆØ¬',
                adminPanel: 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…',
                deposits: 'Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª',
                withdrawals: 'Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª',
                history: 'Ø§Ù„Ø³Ø¬Ù„',
                users: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
                messages: 'Ø§Ù„Ø±Ø³Ø§Ø¦Ù„',
                referrals: 'Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª',
                rewards: 'Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª',
                pendingDeposits: 'Ø·Ù„Ø¨Ø§Øª Ø¥ÙŠØ¯Ø§Ø¹ Ù…Ø¹Ù„Ù‚Ø©',
                pendingWithdrawals: 'Ø·Ù„Ø¨Ø§Øª Ø³Ø­Ø¨ Ù…Ø¹Ù„Ù‚Ø©',
                allRequests: 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
                usersList: 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
                totalUsers: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
                sendMessage: 'Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
                messageTitle: 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©',
                messageContent: 'Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©',
                sendToAll: 'Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¬Ù…ÙŠØ¹',
                sentMessages: 'Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©',
                manageReferrals: 'Ø¥Ø¯Ø§Ø±Ø© Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª',
                selectUser: 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
                commissionAmount: 'Ù…Ø¨Ù„Øº Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©',
                notes: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª',
                addCommission: 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙˆÙ„Ø© Ø¥Ø­Ø§Ù„Ø©',
                loginReward: 'Ù…ÙƒØ§ÙØ£Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠ',
                rewardAmount: 'Ù…Ø¨Ù„Øº Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©',
                giveLoginReward: 'Ù…Ù†Ø­ Ù…ÙƒØ§ÙØ£Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¬Ù…ÙŠØ¹',
                referralReward: 'Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø©',
                giveReferralReward: 'Ù…Ù†Ø­ Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹',
                customReward: 'Ù…ÙƒØ§ÙØ£Ø© Ù…Ø®ØµØµØ©',
                rewardReason: 'Ø³Ø¨Ø¨ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©',
                giveReward: 'Ù…Ù†Ø­ Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©',
                acceptTerms: 'Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ·',
                reject: 'Ø±ÙØ¶',
                copyAddress: 'Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù†',
                submitDeposit: 'Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹',
                savedAddresses: 'Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©',
                addAddress: 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯',
                addNewAddress: 'Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯',
                networkType: 'Ù†ÙˆØ¹ Ø§Ù„Ø´Ø¨ÙƒØ©',
                address: 'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†',
                saveAddress: 'Ø­ÙØ¸ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†',
                cancel: 'Ø¥Ù„ØºØ§Ø¡',
                newWithdrawRequest: 'Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¬Ø¯ÙŠØ¯',
                selectAddress: 'Ø§Ø®ØªØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³Ø­Ø¨',
                chooseAddress: 'Ø§Ø®ØªØ± Ø¹Ù†ÙˆØ§Ù†...',
                securityCodeHint: 'Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…ÙƒÙˆÙ† Ù…Ù† 6 Ø£Ø±Ù‚Ø§Ù…',
                confirmWithdraw: 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø³Ø­Ø¨',
                basicInfo: 'Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©',
                username: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',
                telegramId: 'Ù…Ø¹Ø±Ù ØªÙ„ÙŠØ¬Ø±Ø§Ù…',
                joinDate: 'ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„',
                lastActive: 'Ø¢Ø®Ø± Ù†Ø´Ø§Ø·',
                now: 'Ø§Ù„Ø¢Ù†',
                statistics: 'Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',
                totalDeposits: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª',
                totalWithdrawals: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª',
                packagesCount: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª',
                markAllRead: 'ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡',
                selectLanguage: 'Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©',
                close: 'Ø¥ØºÙ„Ø§Ù‚',
                banned: 'Ù…Ø­Ø¸ÙˆØ±',
                viewEditProfile: 'Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ',
                transactionHistory: 'Ø³Ø¬Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª',
                change: 'ØªØºÙŠÙŠØ±',
                manageRequests: 'Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',
                chooseUser: 'Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…...',
                usdtAddress: 'Ø¹Ù†ÙˆØ§Ù† USDT (TRC20)',
                usdtAddressBep20: 'Ø¹Ù†ÙˆØ§Ù† USDT (BEP20)',
                usdtAddressErc20: 'Ø¹Ù†ÙˆØ§Ù† USDT (ERC20)',
                txid: 'Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© (TxID)'
            },
            en: {
                home: 'Home',
                mining: 'Mining',
                packages: 'Packages',
                team: 'Team',
                deposit: 'Deposit',
                withdraw: 'Withdraw',
                settings: 'Settings',
                profile: 'Profile',
                transactions: 'Transactions',
                notifications: 'Notifications',
                language: 'Language',
                currentBalance: 'Current Balance',
                liveMining: 'Live Mining',
                timeRemaining: 'Time Remaining',
                miningPower: 'Mining Power',
                currentProfit: 'Current Profit',
                claimRewards: 'Claim Rewards',
                recentTransactions: 'Recent Transactions',
                viewAll: 'View All',
                suggestedPackages: 'Suggested Packages',
                basic: 'Basic',
                silver: 'Silver',
                gold: 'Gold',
                platinum: 'Platinum',
                yourBalance: 'Your Balance',
                price: 'Price',
                dailyProfit: 'Daily Profit',
                contractDuration: 'Contract Duration',
                unlimited: 'Unlimited',
                buyPackage: 'Buy Package',
                miningPlatform: 'Mining Platform',
                totalMiningPower: 'Total Mining Power',
                activeMiners: 'Active Miners',
                advancedStats: 'Advanced Statistics',
                totalProfit: 'Total Profit',
                lastClaim: 'Last Claim',
                miningSpeed: 'Mining Speed',
                minedBlocks: 'Mined Blocks',
                claimNow: 'Claim Now',
                dateFilter: 'Date Filter',
                from: 'From',
                to: 'To',
                reset: 'Reset',
                all: 'All',
                totalTransactions: 'Total Transactions',
                totalAmount: 'Total Amount',
                myTeam: 'My Team',
                totalReferralProfit: 'Total Referral Profit',
                yourReferralLink: 'Your Referral Link',
                copyLink: 'Copy Link',
                teamStatistics: 'Team Statistics',
                totalTeam: 'Total Team',
                activeMembers: 'Active Members',
                inactiveMembers: 'Inactive Members',
                levelA: 'Level A',
                levelB: 'Level B',
                levelC: 'Level C',
                levelD: 'Level D',
                securityCode: 'Security Code',
                support: 'Support',
                contactTeam: 'Contact Team',
                contact: 'Contact',
                terms: 'Terms & Conditions',
                readTerms: 'Read Terms',
                view: 'View',
                logout: 'Logout',
                exitApp: 'Exit App',
                exit: 'Exit',
                adminPanel: 'Admin Panel',
                deposits: 'Deposits',
                withdrawals: 'Withdrawals',
                history: 'History',
                users: 'Users',
                messages: 'Messages',
                referrals: 'Referrals',
                rewards: 'Rewards',
                pendingDeposits: 'Pending Deposits',
                pendingWithdrawals: 'Pending Withdrawals',
                allRequests: 'All Requests',
                usersList: 'Users List',
                totalUsers: 'Total Users',
                sendMessage: 'Send Message',
                messageTitle: 'Message Title',
                messageContent: 'Message Content',
                sendToAll: 'Send to All',
                sentMessages: 'Sent Messages',
                manageReferrals: 'Manage Referrals',
                selectUser: 'Select User',
                commissionAmount: 'Commission Amount',
                notes: 'Notes',
                addCommission: 'Add Commission',
                loginReward: 'Daily Login Reward',
                rewardAmount: 'Reward Amount',
                giveLoginReward: 'Give Login Reward to All',
                referralReward: 'Referral Reward',
                giveReferralReward: 'Give Referral Reward to All',
                customReward: 'Custom Reward',
                rewardReason: 'Reward Reason',
                giveReward: 'Give Reward',
                acceptTerms: 'I Accept',
                reject: 'Reject',
                copyAddress: 'Copy Address',
                submitDeposit: 'Submit Deposit',
                savedAddresses: 'Saved Addresses',
                addAddress: 'Add Address',
                addNewAddress: 'Add New Address',
                networkType: 'Network Type',
                address: 'Address',
                saveAddress: 'Save Address',
                cancel: 'Cancel',
                newWithdrawRequest: 'New Withdraw Request',
                selectAddress: 'Select Address',
                chooseAddress: 'Choose Address...',
                securityCodeHint: '6-digit security code',
                confirmWithdraw: 'Confirm Withdraw',
                basicInfo: 'Basic Information',
                username: 'Username',
                telegramId: 'Telegram ID',
                joinDate: 'Join Date',
                lastActive: 'Last Active',
                now: 'Now',
                statistics: 'Statistics',
                totalDeposits: 'Total Deposits',
                totalWithdrawals: 'Total Withdrawals',
                packagesCount: 'Packages Count',
                markAllRead: 'Mark All as Read',
                selectLanguage: 'Select Language',
                close: 'Close',
                banned: 'Banned',
                viewEditProfile: 'View and edit your info',
                transactionHistory: 'Transaction history',
                change: 'Change',
                manageRequests: 'Manage requests and users',
                chooseUser: 'Choose user...',
                usdtAddress: 'USDT Address (TRC20)',
                usdtAddressBep20: 'USDT Address (BEP20)',
                usdtAddressErc20: 'USDT Address (ERC20)',
                txid: 'Transaction ID (TxID)'
            }
        };

        // ==================== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ====================
        const PACKAGES = {
            basic: { name: { ar: 'Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©', en: 'Basic' }, price: 50, power: 5, dailyProfit: 0.5, icon: 'ğŸ›¢ï¸' },
            silver: { name: { ar: 'Ø§Ù„ÙØ¶ÙŠØ©', en: 'Silver' }, price: 200, power: 25, dailyProfit: 2.5, icon: 'âš™ï¸' },
            gold: { name: { ar: 'Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©', en: 'Gold' }, price: 500, power: 75, dailyProfit: 7.5, icon: 'ğŸ’' },
            platinum: { name: { ar: 'Ø§Ù„Ø¨Ù„Ø§ØªÙŠÙ†ÙŠØ©', en: 'Platinum' }, price: 1000, power: 200, dailyProfit: 20, icon: 'ğŸ‘‘' },
            diamond: { name: { ar: 'Ø§Ù„Ø£Ù„Ù…Ø§Ø³ÙŠØ©', en: 'Diamond' }, price: 2500, power: 600, dailyProfit: 60, icon: 'ğŸ’' },
            royal: { name: { ar: 'Ø§Ù„Ù…Ù„ÙƒÙŠØ©', en: 'Royal' }, price: 5000, power: 1500, dailyProfit: 150, icon: 'ğŸ‘‘' }
        };

        // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====================
        window.onload = function() {
            const safetyTimeout = setTimeout(() => {
                document.getElementById('splashScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splashScreen').style.display = 'none';
                    document.getElementById('termsScreen').style.display = 'flex';
                }, 500);
            }, 3000);
            
            setTimeout(() => {
                document.getElementById('splashScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splashScreen').style.display = 'none';
                    clearTimeout(safetyTimeout);
                    initializeApp();
                }, 500);
            }, 2000);
        };

        async function initializeApp() {
            try {
                const telegramUser = tg.initDataUnsafe?.user;
        
                if (!telegramUser) {
                    showToast('âŒ Please open from Telegram', 'danger');
                    document.getElementById('splashScreen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('splashScreen').style.display = 'none';
                        document.getElementById('termsScreen').style.display = 'flex';
                    }, 500);
                    return;
                }

                const languageCode = tg.initDataUnsafe?.user?.language_code || 'ar';
                currentLanguage = languageCode.startsWith('ar') ? 'ar' : 'en';
                applyLanguage();
        
                try {
                    await Promise.race([
                        loadOrCreateUser(telegramUser),
                        new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout')), 5000))
                    ]);
                } catch (error) {
                    console.error('Error loading user:', error);
                    currentUser = createLocalUser(telegramUser);
                }
        
                document.getElementById('splashScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splashScreen').style.display = 'none';
                    if (!currentUser.terms_accepted) {
                        document.getElementById('termsScreen').style.display = 'flex';
                    }
                }, 500);
        
                renderPackages();
                startRealTimeUpdates();
                startMiningTimer();
                startMiningEffect();
        
                try {
                    await loadAdminMessages();
                    displayAdminMessages();
                } catch (error) {
                    console.error('Error loading admin messages:', error);
                }
        
                if (ADMIN_IDS.includes(telegramUser.id.toString())) {
                    document.getElementById('adminMenuItem').style.display = 'flex';
                    try {
                        await updateAdminPanel();
                    } catch (error) {
                        console.error('Error updating admin panel:', error);
                    }
                }
        
                if (telegramUser.photo_url) {
                    document.getElementById('profileImage').src = telegramUser.photo_url;
                }
        
                applyLanguage();
        
            } catch (error) {
                console.error('Error in initializeApp:', error);
                document.getElementById('splashScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('splashScreen').style.display = 'none';
                    document.getElementById('termsScreen').style.display = 'flex';
                }, 500);
            }
        }

        function applyLanguage() {
            document.documentElement.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            document.documentElement.lang = currentLanguage;
            
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
            
            document.getElementById('currentLanguage').textContent = currentLanguage === 'ar' ? 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' : 'English';
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            applyLanguage();
            closeLanguageSelector();
            
            if (currentUser) {
                currentUser.language = lang;
                saveUserData();
            }
            
            renderPackages();
            updateUI();
        }

        function toggleLanguageMenu() {
            document.getElementById('languageSelectorModal').style.display = 'flex';
        }

        function closeLanguageSelector() {
            document.getElementById('languageSelectorModal').style.display = 'none';
        }

        async function loadOrCreateUser(telegramUser) {
            try {
                if (!supabase) {
                    console.error('Supabase not initialized');
                    return createLocalUser(telegramUser);
                }
        
                const { data: existingUser, error } = await supabase
                    .from('users')
                    .select('*')
                    .eq('telegram_id', telegramUser.id.toString())
                    .maybeSingle();
        
                if (error) {
                    console.error('Supabase error:', error);
                    return createLocalUser(telegramUser);
                }
        
                if (existingUser) {
                    currentUser = existingUser;
            
                    try {
                        await supabase
                            .from('users')
                            .update({ last_active: new Date().toISOString() })
                            .eq('id', currentUser.id);
                    } catch (updateError) {
                        console.error('Error updating last_active:', updateError);
                    }
            
                    sendToTelegram(`ğŸ”„ <b>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${currentUser.username}\nğŸ†” Ø§Ù„Ù…Ø¹Ø±Ù: ${telegramUser.id}`);
                } else {
                    currentUser = createLocalUser(telegramUser);
            
                    try {
                        const { error: createError } = await supabase
                            .from('users')
                            .insert([currentUser]);
                
                        if (createError) {
                            console.error('Error creating user in Supabase:', createError);
                        }
                    } catch (createError) {
                        console.error('Error creating user:', createError);
                    }
            
                    addNotification('ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ!', 'Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ ØªØ¬Ø±Ø¨Ø© ØªØ¹Ø¯ÙŠÙ† Ù…ÙˆÙÙ‚Ø©', 'info');
                    sendToTelegram(`ğŸ†• <b>Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${currentUser.username}\nğŸ†” Ø§Ù„Ù…Ø¹Ø±Ù: ${telegramUser.id}`);
                }
            } catch (error) {
                console.error('Error in loadOrCreateUser:', error);
                return createLocalUser(telegramUser);
            }
        }

        function createLocalUser(telegramUser) {
            const startParam = tg.initDataUnsafe?.start_param || null;
    
            return {
                id: Date.now().toString(),
                telegram_id: telegramUser.id.toString(),
                username: telegramUser.username || telegramUser.first_name || 'User',
                first_name: telegramUser.first_name || '',
                last_name: telegramUser.last_name || '',
                photo_url: telegramUser.photo_url || '',
                balance: 0,
                mining_power: 0,
                total_profit: 0,
                packages: [],
                transactions: [],
                pending_deposits: [],
                pending_withdrawals: [],
                notifications: [],
                unread_count: 0,
                notifications_enabled: true,
                security_code: '',
                security_enabled: false,
                withdraw_addresses: [],
                seen_messages: [],
                banned: false,
                terms_accepted: false,
                mining_start_time: new Date().toISOString(),
                last_mining_claim: new Date().toISOString(),
                created_at: new Date().toISOString(),
                last_active: new Date().toISOString(),
                referral_code: telegramUser.id.toString(),
                referred_by: startParam,
                team_commissions: 0,
                language: currentLanguage
            };
        }

        async function saveUserData() {
            if (!currentUser || !currentUser.id) return;
            if (currentUser.id.toString().length < 10) return;
            
            try {
                const { error } = await supabase
                    .from('users')
                    .upsert(currentUser);
                
                if (error) {
                    console.error('Error saving user:', error);
                }
            } catch (error) {
                console.error('Error in saveUserData:', error);
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª ====================
        async function giveLoginRewardToAll() {
            if (!ADMIN_IDS.includes(currentUser.telegram_id)) {
                showToast('âŒ ØºÙŠØ± Ù…ØµØ±Ø­', 'danger');
                return;
            }
            
            const amount = parseFloat(document.getElementById('loginRewardAmount').value);
            
            if (!amount || amount <= 0) {
                showToast('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­', 'danger');
                return;
            }
            
            try {
                const { data: users, error } = await supabase
                    .from('users')
                    .select('*');
                
                if (error) throw error;
                
                for (const user of users) {
                    if (!user.banned) {
                        user.balance = (user.balance || 0) + amount;
                        
                        if (!user.notifications) user.notifications = [];
                        user.notifications.unshift({
                            id: Date.now(),
                            title: currentLanguage === 'ar' ? 'ğŸ Ù…ÙƒØ§ÙØ£Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'ğŸ Login Reward',
                            message: currentLanguage === 'ar' 
                                ? `ØªÙ… Ø¥Ø¶Ø§ÙØ© ${amount.toFixed(2)} $ ÙƒÙ…ÙƒØ§ÙØ£Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„`
                                : `Added ${amount.toFixed(2)} $ as login reward`,
                            type: 'success',
                            date: new Date().toISOString(),
                            read: false
                        });
                        
                        await supabase
                            .from('users')
                            .update({
                                balance: user.balance,
                                notifications: user.notifications
                            })
                            .eq('id', user.id);
                    }
                }
                
                showToast(`âœ… ØªÙ… Ù…Ù†Ø­ ${amount}$ Ù„Ù„Ø¬Ù…ÙŠØ¹`, 'success');
                sendToTelegram(`ğŸ <b>Ù…ÙƒØ§ÙØ£Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</b>\nğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${amount}$\nğŸ‘¥ ØªÙ… Ù…Ù†Ø­Ù‡Ø§ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†`);
                
            } catch (error) {
                console.error('Error giving login reward:', error);
                showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£', 'danger');
            }
        }

        async function giveReferralRewardToAll() {
            if (!ADMIN_IDS.includes(currentUser.telegram_id)) {
                showToast('âŒ ØºÙŠØ± Ù…ØµØ±Ø­', 'danger');
                return;
            }
            
            const amount = parseFloat(document.getElementById('referralRewardAmount').value);
            
            if (!amount || amount <= 0) {
                showToast('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­', 'danger');
                return;
            }
            
            try {
                const { data: users, error } = await supabase
                    .from('users')
                    .select('*');
                
                if (error) throw error;
                
                for (const user of users) {
                    if (!user.banned && user.referred_by) {
                        user.balance = (user.balance || 0) + amount;
                        user.team_commissions = (user.team_commissions || 0) + amount;
                        
                        if (!user.notifications) user.notifications = [];
                        user.notifications.unshift({
                            id: Date.now(),
                            title: currentLanguage === 'ar' ? 'ğŸ¤ Ù…ÙƒØ§ÙØ£Ø© Ø¥Ø­Ø§Ù„Ø©' : 'ğŸ¤ Referral Reward',
                            message: currentLanguage === 'ar'
                                ? `ØªÙ… Ø¥Ø¶Ø§ÙØ© ${amount.toFixed(2)} $ ÙƒÙ…ÙƒØ§ÙØ£Ø© Ø¥Ø­Ø§Ù„Ø©`
                                : `Added ${amount.toFixed(2)} $ as referral reward`,
                            type: 'success',
                            date: new Date().toISOString(),
                            read: false
                        });
                        
                        await supabase
                            .from('users')
                            .update({
                                balance: user.balance,
                                team_commissions: user.team_commissions,
                                notifications: user.notifications
                            })
                            .eq('id', user.id);
                    }
                }
                
                showToast(`âœ… ØªÙ… Ù…Ù†Ø­ ${amount}$ Ù„Ù„Ù…Ø­Ø§Ù„ÙŠÙ†`, 'success');
                sendToTelegram(`ğŸ¤ <b>Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</b>\nğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${amount}$\nğŸ‘¥ ØªÙ… Ù…Ù†Ø­Ù‡Ø§ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø­Ø§Ù„ÙŠÙ†`);
                
            } catch (error) {
                console.error('Error giving referral reward:', error);
                showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£', 'danger');
            }
        }

        async function giveCustomReward() {
            if (!ADMIN_IDS.includes(currentUser.telegram_id)) {
                showToast('âŒ ØºÙŠØ± Ù…ØµØ±Ø­', 'danger');
                return;
            }
            
            const userId = document.getElementById('customRewardUserSelect').value;
            const amount = parseFloat(document.getElementById('customRewardAmount').value);
            const reason = document.getElementById('customRewardReason').value.trim();
            
            if (!userId || !amount || amount <= 0) {
                showToast('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­', 'danger');
                return;
            }
            
            try {
                const { data: user, error } = await supabase
                    .from('users')
                    .select('*')
                    .eq('id', userId)
                    .single();
                
                if (error) throw error;
                
                user.balance = (user.balance || 0) + amount;
                
                if (!user.notifications) user.notifications = [];
                user.notifications.unshift({
                    id: Date.now(),
                    title: currentLanguage === 'ar' ? 'ğŸ Ù…ÙƒØ§ÙØ£Ø© Ø®Ø§ØµØ©' : 'ğŸ Special Reward',
                    message: currentLanguage === 'ar'
                        ? `ØªÙ… Ø¥Ø¶Ø§ÙØ© ${amount.toFixed(2)} $ ${reason ? ': ' + reason : ''}`
                        : `Added ${amount.toFixed(2)} $ ${reason ? ': ' + reason : ''}`,
                    type: 'success',
                    date: new Date().toISOString(),
                    read: false
                });
                
                await supabase
                    .from('users')
                    .update({
                        balance: user.balance,
                        notifications: user.notifications
                    })
                    .eq('id', user.id);
                
                if (currentUser.id === userId) {
                    currentUser = user;
                    updateUI();
                }
                
                document.getElementById('customRewardAmount').value = '';
                document.getElementById('customRewardReason').value = '';
                
                showToast(`âœ… ØªÙ… Ù…Ù†Ø­ ${amount}$ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…`, 'success');
                sendToTelegram(`ğŸ <b>Ù…ÙƒØ§ÙØ£Ø© Ø®Ø§ØµØ©</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.username}\nğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${amount}$\nğŸ“ Ø§Ù„Ø³Ø¨Ø¨: ${reason || 'Ø¨Ø¯ÙˆÙ† Ø³Ø¨Ø¨'}`);
                
            } catch (error) {
                console.error('Error giving custom reward:', error);
                showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£', 'danger');
            }
        }

        async function updateAdminPanel() {
            if (!ADMIN_IDS.includes(currentUser.telegram_id)) return;
            
            try {
                const { data: users, error } = await supabase
                    .from('users')
                    .select('*');
                
                if (error) throw error;
                
                document.getElementById('totalUsersCount').textContent = users.length;
                
                const pendingDeposits = [];
                users.forEach(u => {
                    if (u.pending_deposits) {
                        u.pending_deposits.forEach(d => {
                            if (d.status === 'pending') pendingDeposits.push({...d, user: u});
                        });
                    }
                });
                
                document.getElementById('pendingDepositsList').innerHTML = pendingDeposits.length ? 
                    pendingDeposits.map(d => formatAdminRequest(d, 'deposit')).join('') :
                    '<div class="empty-state"><span>ğŸ’°</span><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø¥ÙŠØ¯Ø§Ø¹</p></div>';
                
                const pendingWithdrawals = [];
                users.forEach(u => {
                    if (u.pending_withdrawals) {
                        u.pending_withdrawals.forEach(w => {
                            if (w.status === 'pending') pendingWithdrawals.push({...w, user: u});
                        });
                    }
                });
                
                document.getElementById('pendingWithdrawalsList').innerHTML = pendingWithdrawals.length ?
                    pendingWithdrawals.map(w => formatAdminRequest(w, 'withdraw')).join('') :
                    '<div class="empty-state"><span>ğŸ’¸</span><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø³Ø­Ø¨</p></div>';
                
                const allRequests = [];
                users.forEach(u => {
                    (u.transactions || [])
                        .filter(t => t.type === 'deposit' || t.type === 'withdraw' || t.type === 'referral')
                        .forEach(t => allRequests.push({...t, username: u.username}));
                });
                
                allRequests.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                document.getElementById('allRequestsList').innerHTML = allRequests.length ?
                    allRequests.map(r => formatHistoryItem(r)).join('') :
                    '<div class="empty-state"><span>ğŸ“‹</span><p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„</p></div>';
                
                document.getElementById('usersList').innerHTML = users
                    .sort((a, b) => (b.balance + b.total_profit) - (a.balance + a.total_profit))
                    .map(u => formatUserItem(u)).join('');
                
                await updateSentMessagesList();
                await updateReferralUserSelect();
            } catch (error) {
                console.error('Error updating admin panel:', error);
            }
        }

        async function updateReferralUserSelect() {
            try {
                const { data: users, error } = await supabase
                    .from('users')
                    .select('*');
                
                if (error) throw error;
                
                const select = document.getElementById('referralUserSelect');
                const customSelect = document.getElementById('customRewardUserSelect');
                
                let options = '<option value="">Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…...</option>';
                let customOptions = '<option value="">Ø§Ø®ØªØ± Ù…Ø³ØªØ®Ø¯Ù…...</option>';
                
                users.forEach(u => {
                    options += `<option value="${u.id}">${u.username} (${u.telegram_id})</option>`;
                    customOptions += `<option value="${u.id}">${u.username} (${u.telegram_id})</option>`;
                });
                
                select.innerHTML = options;
                customSelect.innerHTML = customOptions;
            } catch (error) {
                console.error('Error updating user select:', error);
            }
        }

        function formatAdminRequest(req, type) {
            const icon = type === 'deposit' ? 'ğŸ’°' : 'ğŸ’¸';
            const details = type === 'deposit' ? 
                `ğŸŒ Ø§Ù„Ø´Ø¨ÙƒØ©: ${req.network || 'TRC20'}\nğŸ†” TxID: ${req.txId}` : 
                `ğŸŒ Ø§Ù„Ø´Ø¨ÙƒØ©: ${req.network}\nğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${req.address}`;
            
            return `
                <div style="background: rgba(0,0,0,0.2); border-radius: 14px; padding: 15px; margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="font-weight: 700;">ğŸ‘¤ ${req.user.username}</span>
                        <span class="status-badge status-pending">Ù…Ø¹Ù„Ù‚</span>
                    </div>
                    <div style="margin-bottom: 8px;">${icon} Ø§Ù„Ù…Ø¨Ù„Øº: <span style="color: var(--success); font-weight: 700;">${req.amount} $</span></div>
                    <div style="margin-bottom: 8px; font-size: 13px; white-space: pre-line;">${details}</div>
                    <div style="margin-bottom: 15px; font-size: 12px; opacity: 0.7;">ğŸ“… ${new Date(req.date).toLocaleString('ar')}</div>
                    <div class="action-buttons">
                        <button class="action-btn approve" onclick="handleRequest('${req.user.id}', '${req.id}', '${type}', 'approve')">âœ“ Ù‚Ø¨ÙˆÙ„</button>
                        <button class="action-btn reject" onclick="handleRequest('${req.user.id}', '${req.id}', '${type}', 'reject')">âœ— Ø±ÙØ¶</button>
                    </div>
                </div>
            `;
        }

        function formatHistoryItem(item) {
            const statusClass = {
                pending: 'status-pending',
                approved: 'status-approved',
                rejected: 'status-rejected'
            }[item.status] || '';
            
            const statusText = {
                pending: 'Ù…Ø¹Ù„Ù‚',
                approved: 'Ù…Ù‚Ø¨ÙˆÙ„',
                rejected: 'Ù…Ø±ÙÙˆØ¶'
            }[item.status] || '';
            
            const icon = {
                deposit: 'ğŸ’°',
                withdraw: 'ğŸ’¸',
                referral: 'ğŸ¤'
            }[item.type] || 'ğŸ“';
            
            return `
                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 12px; margin-bottom: 8px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span style="font-weight: 600;">${item.username}</span>
                        <span class="status-badge ${statusClass}">${statusText}</span>
                    </div>
                    <div>${icon} ${item.title}</div>
                    <div style="font-size: 13px;">${item.amount > 0 ? '+' : ''}${item.amount} $</div>
                    <div style="font-size: 11px; opacity: 0.6; margin-top: 5px;">ğŸ“… ${new Date(item.date).toLocaleString('ar')}</div>
                </div>
            `;
        }

        function formatUserItem(user) {
            return `
                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 15px; margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <div>
                            <span style="font-weight: 700;">ğŸ‘¤ ${user.username}</span>
                            ${user.banned ? '<span class="banned-badge">ğŸš« Ù…Ø­Ø¸ÙˆØ±</span>' : ''}
                        </div>
                        <span style="color: var(--primary);">ğŸ†” ${user.telegram_id}</span>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <div>ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯: <span style="color: var(--success);">${(user.balance || 0).toFixed(2)} $</span></div>
                        <div>â›ï¸ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­: <span style="color: var(--success);">${(user.total_profit || 0).toFixed(2)} $</span></div>
                        <div>ğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª: <span style="color: var(--primary);">${(user.packages || []).length}</span></div>
                        <div>ğŸ¤ Ø¹Ù…ÙˆÙ„Ø§Øª: <span style="color: var(--primary);">${(user.team_commissions || 0).toFixed(2)} $</span></div>
                        <div>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date(user.created_at).toLocaleDateString('ar')}</div>
                    </div>
                    <div class="action-buttons">
                        ${user.banned ? 
                            `<button class="action-btn warning" onclick="toggleUserBan('${user.id}', false)">ğŸ”“ ÙÙƒ Ø§Ù„Ø­Ø¸Ø±</button>` : 
                            `<button class="action-btn reject" onclick="toggleUserBan('${user.id}', true)">ğŸ”’ Ø­Ø¸Ø±</button>`
                        }
                        <button class="action-btn approve" onclick="adjustUserBalance('${user.id}')">ğŸ’° ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯</button>
                    </div>
                </div>
            `;
        }

        async function handleRequest(userId, requestId, type, action) {
            try {
                const { data: user, error } = await supabase
                    .from('users')
                    .select('*')
                    .eq('id', userId)
                    .single();
                
                if (error) throw error;
                
                const requests = type === 'deposit' ? user.pending_deposits : user.pending_withdrawals;
                const requestIndex = requests.findIndex(r => r.id == requestId);
                
                if (requestIndex === -1) return;
                
                const request = requests[requestIndex];
                
                if (action === 'approve') {
                    if (type === 'deposit') {
                        user.balance = (user.balance || 0) + request.amount;
                        
                        const transaction = user.transactions?.find(t => 
                            t.type === 'deposit' && 
                            t.amount === request.amount && 
                            t.status === 'pending'
                        );
                        
                        if (transaction) {
                            transaction.status = 'approved';
                        }
                        
                        if (!user.notifications) user.notifications = [];
                        user.notifications.unshift({
                            id: Date.now(),
                            title: currentLanguage === 'ar' ? 'âœ… ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹' : 'âœ… Deposit Approved',
                            message: currentLanguage === 'ar'
                                ? `ØªÙ… Ø¥Ø¶Ø§ÙØ© ${request.amount} $ Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ`
                                : `${request.amount} $ has been added to your balance`,
                            type: 'success',
                            date: new Date().toISOString(),
                            read: false
                        });
                        
                        sendToTelegram(`âœ… <b>ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø¥ÙŠØ¯Ø§Ø¹</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.username}\nğŸ’µ Ø§Ù„Ù…Ø¨Ù„Øº: ${request.amount}$\nğŸŒ Ø§Ù„Ø´Ø¨ÙƒØ©: ${request.network}`);
                        
                    } else if (type === 'withdraw') {
                        const transaction = user.transactions?.find(t => 
                            t.type === 'withdraw' && 
                            Math.abs(t.amount) === request.amount && 
                            t.status === 'pending'
                        );
                        
                        if (transaction) {
                            transaction.status = 'approved';
                        }
                        
                        if (!user.notifications) user.notifications = [];
                        user.notifications.unshift({
                            id: Date.now(),
                            title: currentLanguage === 'ar' ? 'âœ… ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø³Ø­Ø¨' : 'âœ… Withdraw Approved',
                            message: currentLanguage === 'ar'
                                ? `ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø³Ø­Ø¨ ${request.amount} $`
                                : `Your withdraw of ${request.amount} $ has been approved`,
                            type: 'success',
                            date: new Date().toISOString(),
                            read: false
                        });
                        
                        sendToTelegram(`âœ… <b>ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø³Ø­Ø¨</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.username}\nğŸ’µ Ø§Ù„Ù…Ø¨Ù„Øº: ${request.amount}$\nğŸŒ Ø§Ù„Ø´Ø¨ÙƒØ©: ${request.network}\nğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${request.address}`);
                    }
                    
                } else if (action === 'reject') {
                    if (type === 'withdraw') {
                        user.balance = (user.balance || 0) + request.amount;
                    }
                    
                    const transaction = user.transactions?.find(t => 
                        t.type === type && 
                        (type === 'deposit' ? t.amount === request.amount : Math.abs(t.amount) === request.amount) && 
                        t.status === 'pending'
                    );
                    
                    if (transaction) {
                        transaction.status = 'rejected';
                    }
                    
                    if (!user.notifications) user.notifications = [];
                    user.notifications.unshift({
                        id: Date.now(),
                        title: currentLanguage === 'ar' ? 'âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨' : 'âŒ Request Rejected',
                        message: currentLanguage === 'ar'
                            ? `Ø¹Ø°Ø±Ø§Ù‹ØŒ ØªÙ… Ø±ÙØ¶ Ø·Ù„Ø¨ ${type === 'deposit' ? 'Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹' : 'Ø§Ù„Ø³Ø­Ø¨'}`
                            : `Sorry, your ${type === 'deposit' ? 'deposit' : 'withdraw'} request has been rejected`,
                        type: 'danger',
                        date: new Date().toISOString(),
                        read: false
                    });
                    
                    sendToTelegram(`âŒ <b>ØªÙ… Ø±ÙØ¶ Ø·Ù„Ø¨</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.username}\nğŸ’µ Ø§Ù„Ù…Ø¨Ù„Øº: ${request.amount}$\nÙ†ÙˆØ¹ Ø§Ù„Ø·Ù„Ø¨: ${type === 'deposit' ? 'Ø¥ÙŠØ¯Ø§Ø¹' : 'Ø³Ø­Ø¨'}`);
                }
                
                requests.splice(requestIndex, 1);
                
                await supabase
                    .from('users')
                    .update({
                        balance: user.balance,
                        transactions: user.transactions,
                        pending_deposits: user.pending_deposits,
                        pending_withdrawals: user.pending_withdrawals,
                        notifications: user.notifications
                    })
                    .eq('id', user.id);
                
                if (currentUser && currentUser.id === userId) {
                    currentUser = user;
                    updateUI();
                }
                
                await updateAdminPanel();
                
            } catch (error) {
                console.error('Error handling request:', error);
                showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£', 'danger');
            }
        }

        async function toggleUserBan(userId, ban) {
            try {
                const { data: user, error } = await supabase
                    .from('users')
                    .select('*')
                    .eq('id', userId)
                    .single();
                
                if (error) throw error;
                
                user.banned = ban;
                
                if (!user.notifications) user.notifications = [];
                user.notifications.unshift({
                    id: Date.now(),
                    title: ban ? 'ğŸš« ØªÙ… Ø­Ø¸Ø± Ø­Ø³Ø§Ø¨Ùƒ' : 'ğŸ”“ ØªÙ… ÙÙƒ Ø§Ù„Ø­Ø¸Ø±',
                    message: ban 
                        ? 'Ù„Ù„Ø£Ø³Ù ØªÙ… Ø­Ø¸Ø± Ø­Ø³Ø§Ø¨ÙƒØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù…'
                        : 'ØªÙ… ÙÙƒ Ø§Ù„Ø­Ø¸Ø± Ø¹Ù† Ø­Ø³Ø§Ø¨ÙƒØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',
                    type: ban ? 'danger' : 'success',
                    date: new Date().toISOString(),
                    read: false
                });
                
                await supabase
                    .from('users')
                    .update({
                        banned: user.banned,
                        notifications: user.notifications
                    })
                    .eq('id', user.id);
                
                if (currentUser && currentUser.id === userId) {
                    currentUser = user;
                    updateUI();
                }
                
                await updateAdminPanel();
                showToast(ban ? 'ğŸ”’ ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' : 'ğŸ”“ ØªÙ… ÙÙƒ Ø§Ù„Ø­Ø¸Ø±', 'success');
                
                sendToTelegram(`${ban ? 'ğŸ”’' : 'ğŸ”“'} <b>${ban ? 'Ø­Ø¸Ø±' : 'ÙÙƒ Ø­Ø¸Ø±'} Ù…Ø³ØªØ®Ø¯Ù…</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.username}\nğŸ†” Ø§Ù„Ù…Ø¹Ø±Ù: ${userId}`);
                
            } catch (error) {
                console.error('Error toggling user ban:', error);
                showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£', 'danger');
            }
        }

        async function adjustUserBalance(userId) {
            try {
                const { data: user, error } = await supabase
                    .from('users')
                    .select('*')
                    .eq('id', userId)
                    .single();
                
                if (error) throw error;
                
                const amount = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº (Ø§Ø³ØªØ®Ø¯Ù… - Ù„Ù„Ø®ØµÙ…):', '0');
                
                if (amount !== null) {
                    const numAmount = parseFloat(amount);
                    if (!isNaN(numAmount) && numAmount !== 0) {
                        user.balance = (user.balance || 0) + numAmount;
                        
                        if (!user.notifications) user.notifications = [];
                        user.notifications.unshift({
                            id: Date.now(),
                            title: numAmount > 0 ? 'ğŸ’° Ø¥ÙŠØ¯Ø§Ø¹ ÙŠØ¯ÙˆÙŠ' : 'ğŸ’¸ Ø®ØµÙ… ÙŠØ¯ÙˆÙŠ',
                            message: numAmount > 0 
                                ? `ØªÙ… Ø¥Ø¶Ø§ÙØ© ${Math.abs(numAmount).toFixed(2)} $ Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ`
                                : `ØªÙ… Ø®ØµÙ… ${Math.abs(numAmount).toFixed(2)} $ Ù…Ù† Ø±ØµÙŠØ¯Ùƒ`,
                            type: numAmount > 0 ? 'success' : 'warning',
                            date: new Date().toISOString(),
                            read: false
                        });
                        
                        await supabase
                            .from('users')
                            .update({
                                balance: user.balance,
                                notifications: user.notifications
                            })
                            .eq('id', user.id);
                        
                        if (currentUser && currentUser.id === userId) {
                            currentUser = user;
                            updateUI();
                        }
                        
                        await updateAdminPanel();
                        showToast(`âœ… ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯`, 'success');
                        
                        sendToTelegram(`${numAmount > 0 ? 'ğŸ’°' : 'ğŸ’¸'} <b>ØªØ¹Ø¯ÙŠÙ„ Ø±ØµÙŠØ¯</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.username}\nğŸ’µ Ø§Ù„Ù…Ø¨Ù„Øº: ${numAmount > 0 ? '+' : ''}${numAmount}$\nğŸ“Š Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¬Ø¯ÙŠØ¯: ${user.balance}$`);
                    }
                }
            } catch (error) {
                console.error('Error adjusting balance:', error);
                showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£', 'danger');
            }
        }

        async function sendMessageToAll() {
            const title = document.getElementById('messageTitle').value.trim();
            const content = document.getElementById('messageContent').value.trim();
            
            if (!title || !content) {
                showToast('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† ÙˆÙ…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø³Ø§Ù„Ø©', 'danger');
                return;
            }
            
            try {
                const message = {
                    id: Date.now().toString(),
                    title,
                    content,
                    created_at: new Date().toISOString()
                };
                
                const { error } = await supabase
                    .from('admin_messages')
                    .insert([message]);
                
                if (error) throw error;
                
                const { data: users, error: usersError } = await supabase
                    .from('users')
                    .select('*');
                
                if (usersError) throw usersError;
                
                for (const user of users) {
                    if (!user.seen_messages) user.seen_messages = [];
                    
                    await supabase
                        .from('users')
                        .update({ seen_messages: user.seen_messages })
                        .eq('id', user.id);
                }
                
                document.getElementById('messageTitle').value = '';
                document.getElementById('messageContent').value = '';
                
                await loadAdminMessages();
                await updateSentMessagesList();
                showToast('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹', 'success');
                
                sendToTelegram(`ğŸ“¨ <b>Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</b>\n\nğŸ“Œ ${title}\n\n${content}`);
                
            } catch (error) {
                console.error('Error sending message:', error);
                showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£', 'danger');
            }
        }

        async function updateSentMessagesList() {
            const container = document.getElementById('sentMessagesList');
            
            if (adminMessages.length === 0) {
                container.innerHTML = '<div class="empty-state"><span>ğŸ“­</span><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ù…Ø±Ø³Ù„Ø©</p></div>';
                return;
            }
            
            container.innerHTML = adminMessages.map(msg => `
                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 15px; margin-bottom: 10px;">
                    <div style="font-weight: 700; color: var(--primary); margin-bottom: 5px;">ğŸ“Œ ${msg.title}</div>
                    <div style="margin-bottom: 8px; font-size: 14px;">${msg.content}</div>
                    <div style="font-size: 11px; opacity:0.6;">ğŸ“… ${new Date(msg.created_at).toLocaleString(currentLanguage === 'ar' ? 'ar-EG' : 'en-US')}</div>
                </div>
            `).join('');
        }

        async function loadAdminMessages() {
            try {
                const { data: messages, error } = await supabase
                    .from('admin_messages')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) {
                    console.error('Error loading messages:', error);
                    return;
                }
                
                adminMessages = messages || [];
            } catch (error) {
                console.error('Error in loadAdminMessages:', error);
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================
        function startMiningEffect() {
            if (miningEffectInterval) clearInterval(miningEffectInterval);
            
            miningEffectInterval = setInterval(() => {
                if (currentUser && currentUser.mining_power > 0 && !currentUser.banned) {
                    fakeHashRate = Math.floor(Math.random() * 100) + (currentUser.mining_power * 10);
                    document.getElementById('hashRate').textContent = formatHashRate(fakeHashRate);
                    document.getElementById('hashRateValue').textContent = formatHashRate(fakeHashRate);
                    document.getElementById('miningSpeed').textContent = formatHashRate(fakeHashRate);
                    
                    if (Math.random() > 0.7) {
                        fakeMinedBlocks++;
                        document.getElementById('minedBlocks').textContent = fakeMinedBlocks;
                    }
                    
                    createMiningParticle();
                    updateMiningMachines();
                }
            }, 500);
        }

        function updateMiningMachines() {
            const container = document.getElementById('miningMachines');
            if (!container || !currentUser.packages) return;
            
            if (currentUser.packages.length === 0) {
                container.innerHTML = '<div class="empty-state"><span>âš™ï¸</span><p>' + (currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¢Ù„Ø§Øª ØªØ¹Ø¯ÙŠÙ†' : 'No mining machines') + '</p></div>';
                return;
            }
            
            container.innerHTML = currentUser.packages.map((pkg) => {
                const isActive = Math.random() > 0.3;
                const packageName = typeof pkg.name === 'object' ? pkg.name[currentLanguage] : pkg.name;
                return `
                    <div class="mining-machine ${isActive ? 'active' : ''}">
                        <div class="mining-machine-icon">${pkg.icon || 'âš™ï¸'}</div>
                        <div class="mining-machine-name">${packageName}</div>
                        <div class="mining-machine-power">âš¡ ${pkg.power} TH/s</div>
                        <div class="mining-machine-status ${isActive ? 'status-mining' : 'status-idle'}">
                            ${isActive ? (currentLanguage === 'ar' ? 'ØªØ¹Ø¯ÙŠÙ†' : 'Mining') : (currentLanguage === 'ar' ? 'Ù…ØªÙˆÙ‚Ù' : 'Idle')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function formatHashRate(hash) {
            if (hash < 1000) return hash + ' H/s';
            if (hash < 1000000) return (hash/1000).toFixed(2) + ' KH/s';
            if (hash < 1000000000) return (hash/1000000).toFixed(2) + ' MH/s';
            return (hash/1000000000).toFixed(2) + ' GH/s';
        }

        function createMiningParticle() {
            const container = document.getElementById('miningParticles');
            if (!container) return;
            
            const particle = document.createElement('div');
            particle.className = 'mining-particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            
            container.appendChild(particle);
            
            setTimeout(() => {
                particle.remove();
            }, 1000);
        }

        function startMiningTimer() {
            if (miningInterval) clearInterval(miningInterval);
            
            miningInterval = setInterval(() => {
                if (currentUser && currentUser.mining_power > 0 && !currentUser.banned) {
                    updateMiningDisplay();
                }
            }, 1000);
        }

        async function claimMiningRewards() {
            if (currentUser.banned) {
                showToast('âŒ Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±', 'danger');
                return;
            }

            const now = Date.now();
            const lastClaim = new Date(currentUser.last_mining_claim).getTime();
            const timeSinceClaim = now - lastClaim;
            const totalTime = 24 * 60 * 60 * 1000;
            
            if (timeSinceClaim < totalTime) {
                showToast('âš ï¸ Ù„Ù… ÙŠÙƒØªÙ…Ù„ ÙˆÙ‚Øª Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø¨Ø¹Ø¯', 'warning');
                return;
            }
            
            const cycles = Math.floor(timeSinceClaim / totalTime);
            const dailyProfit = currentUser.mining_power * 0.1;
            const totalProfit = dailyProfit * cycles;
            
            if (totalProfit > 0) {
                currentUser.balance = (currentUser.balance || 0) + totalProfit;
                currentUser.total_profit = (currentUser.total_profit || 0) + totalProfit;
                currentUser.last_mining_claim = new Date().toISOString();
                
                if (!currentUser.transactions) currentUser.transactions = [];
                currentUser.transactions.unshift({
                    id: Date.now(),
                    type: 'mining',
                    title: currentLanguage === 'ar' ? `Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† (${cycles} ÙŠÙˆÙ…)` : `Mining Profit (${cycles} day${cycles > 1 ? 's' : ''})`,
                    amount: totalProfit,
                    status: 'approved',
                    date: new Date().toISOString()
                });
                
                if (!currentUser.notifications) currentUser.notifications = [];
                currentUser.notifications.unshift({
                    id: Date.now(),
                    title: currentLanguage === 'ar' ? 'â›ï¸ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ØªØ¹Ø¯ÙŠÙ†' : 'â›ï¸ Mining Profit',
                    message: currentLanguage === 'ar'
                        ? `ØªÙ… Ø¥Ø¶Ø§ÙØ© ${totalProfit.toFixed(2)} $ Ø¥Ù„Ù‰ Ø±ØµÙŠØ¯Ùƒ`
                        : `Added ${totalProfit.toFixed(2)} $ to your balance`,
                    type: 'success',
                    date: new Date().toISOString(),
                    read: false
                });
                
                await saveUserData();
                updateUI();
                showToast(`âœ… ØªÙ… ØµØ±Ù ${totalProfit.toFixed(2)} $`, 'success');
                
                sendToTelegram(`â›ï¸ <b>ØµØ±Ù Ø£Ø±Ø¨Ø§Ø­ ØªØ¹Ø¯ÙŠÙ†</b>\nğŸ‘¤ ${currentUser.username}\nğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${totalProfit.toFixed(2)}$\nğŸ“† Ø§Ù„Ù…Ø¯Ø©: ${cycles} ÙŠÙˆÙ…`);
            }
        }

        function updateMiningDisplay() {
            if (!currentUser) return;
            
            const now = Date.now();
            const lastClaim = new Date(currentUser.last_mining_claim).getTime();
            const timeSinceClaim = now - lastClaim;
            const totalTime = 24 * 60 * 60 * 1000;
            const remainingTime = Math.max(totalTime - timeSinceClaim, 0);
            
            const hours = Math.floor(remainingTime / (1000 * 60 * 60));
            const minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);
            
            const timeLeft = `${hours.toString().padStart(2,'0')}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
            const progress = ((totalTime - remainingTime) / totalTime) * 100;
            
            const dailyProfit = currentUser.mining_power * 0.1;
            const currentProfit = dailyProfit * (timeSinceClaim / totalTime);
            
            document.getElementById('miningTimer').textContent = hours;
            document.getElementById('miningPageTimer').textContent = hours;
            document.getElementById('miningTimeLeft').textContent = timeLeft;
            document.getElementById('miningPageTimeLeft').textContent = timeLeft;
            document.getElementById('miningProgress').style.width = `${progress}%`;
            document.getElementById('miningPageProgress').style.width = `${progress}%`;
            
            document.getElementById('homeCurrentProfit').textContent = currentProfit.toFixed(2) + ' $';
            document.getElementById('miningCurrentProfit').textContent = currentProfit.toFixed(2) + ' $';
            document.getElementById('lastMiningClaim').textContent = new Date(currentUser.last_mining_claim).toLocaleDateString(currentLanguage === 'ar' ? 'ar-EG' : 'en-US');
            
            const claimBtn = document.getElementById('claimMiningBtn');
            const miningClaimBtn = document.getElementById('miningClaimBtn');
            
            if (remainingTime <= 0) {
                if (claimBtn) claimBtn.disabled = false;
                if (miningClaimBtn) miningClaimBtn.disabled = false;
            } else {
                if (claimBtn) claimBtn.disabled = true;
                if (miningClaimBtn) miningClaimBtn.disabled = true;
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================
        function filterTransactionsByDate() {
            const fromDate = document.getElementById('dateFrom').value;
            const toDate = document.getElementById('dateTo').value;
            
            let filtered = currentUser.transactions || [];
            
            if (fromDate) {
                filtered = filtered.filter(t => new Date(t.date) >= new Date(fromDate));
            }
            
            if (toDate) {
                const toDateEnd = new Date(toDate);
                toDateEnd.setDate(toDateEnd.getDate() + 1);
                filtered = filtered.filter(t => new Date(t.date) <= toDateEnd);
            }
            
            const totalAmount = filtered.reduce((sum, t) => sum + t.amount, 0);
            document.getElementById('totalTransactionsCount').textContent = filtered.length;
            document.getElementById('totalTransactionsAmount').textContent = totalAmount.toFixed(2) + ' $';
            
            if (filtered.length === 0) {
                document.getElementById('allTransactionsList').innerHTML = '<div class="empty-state"><span>ğŸ“­</span><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª</p></div>';
            } else {
                document.getElementById('allTransactionsList').innerHTML = filtered.map(t => formatTransaction(t)).join('');
            }
        }

        function resetDateFilter() {
            document.getElementById('dateFrom').value = '';
            document.getElementById('dateTo').value = '';
            filterTransactionsByDate();
        }

        function filterTransactions(type, element) {
            document.querySelectorAll('#transactionFilters .btn-outline').forEach(btn => {
                btn.style.background = 'transparent';
                btn.style.color = 'var(--primary)';
            });
            element.style.background = 'var(--primary)';
            element.style.color = 'var(--secondary)';
            
            let filtered = currentUser.transactions || [];
            
            if (type !== 'all') {
                filtered = filtered.filter(t => t.type === type);
            }
            
            const fromDate = document.getElementById('dateFrom').value;
            const toDate = document.getElementById('dateTo').value;
            
            if (fromDate) {
                filtered = filtered.filter(t => new Date(t.date) >= new Date(fromDate));
            }
            
            if (toDate) {
                const toDateEnd = new Date(toDate);
                toDateEnd.setDate(toDateEnd.getDate() + 1);
                filtered = filtered.filter(t => new Date(t.date) <= toDateEnd);
            }
            
            const totalAmount = filtered.reduce((sum, t) => sum + t.amount, 0);
            document.getElementById('totalTransactionsCount').textContent = filtered.length;
            document.getElementById('totalTransactionsAmount').textContent = totalAmount.toFixed(2) + ' $';
            
            if (filtered.length === 0) {
                document.getElementById('allTransactionsList').innerHTML = '<div class="empty-state"><span>ğŸ“­</span><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª</p></div>';
            } else {
                document.getElementById('allTransactionsList').innerHTML = filtered.map(t => formatTransaction(t)).join('');
            }
        }

        function formatTransaction(t) {
            const statusBadge = {
                pending: '<span class="status-badge status-pending">' + (currentLanguage === 'ar' ? 'Ù…Ø¹Ù„Ù‚' : 'Pending') + '</span>',
                approved: '<span class="status-badge status-approved">' + (currentLanguage === 'ar' ? 'Ù…Ù‚Ø¨ÙˆÙ„' : 'Approved') + '</span>',
                rejected: '<span class="status-badge status-rejected">' + (currentLanguage === 'ar' ? 'Ù…Ø±ÙÙˆØ¶' : 'Rejected') + '</span>'
            }[t.status] || '';
            
            const icon = {
                deposit: 'ğŸ’°',
                withdraw: 'ğŸ’¸',
                mining: 'â›ï¸',
                package: 'ğŸ“¦',
                referral: 'ğŸ¤'
            }[t.type] || 'ğŸ“';
            
            return `
                <div class="transaction-item">
                    <div style="display: flex; align-items: center; flex: 1;">
                        <div class="transaction-icon">${icon}</div>
                        <div class="transaction-info">
                            <div class="transaction-title">
                                ${t.title}
                                ${statusBadge}
                            </div>
                            <div class="transaction-meta">
                                <span>${new Date(t.date).toLocaleDateString(currentLanguage === 'ar' ? 'ar-EG' : 'en-US')}</span>
                                <span>${new Date(t.date).toLocaleTimeString(currentLanguage === 'ar' ? 'ar-EG' : 'en-US')}</span>
                            </div>
                        </div>
                    </div>
                    <div class="transaction-amount ${t.amount > 0 ? 'positive' : 'negative'}">
                        ${t.amount > 0 ? '+' : ''}${Math.abs(t.amount).toFixed(2)} $
                    </div>
                </div>
            `;
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ÙØ±ÙŠÙ‚ ====================
        function copyReferralLink() {
            const botUsername = "OilMineXBot";
            const link = `https://t.me/${botUsername}?start=${currentUser.referral_code}`;
            navigator.clipboard.writeText(link);
            showToast('ğŸ“‹ ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function isUserActive(user) {
            if (!user.transactions) return false;
            return user.transactions.some(t => t.type === 'deposit' && t.status === 'approved');
        }

        async function getTeamStructure() {
            const { data: allUsers, error } = await supabase
                .from('users')
                .select('*');
            
            if (error) return { A: [], B: [], C: [], D: [] };
            
            const team = { A: [], B: [], C: [], D: [] };

            allUsers.forEach(u => {
                if (u.referred_by === currentUser.referral_code) {
                    team.A.push(u);
                }
            });

            team.A.forEach(userA => {
                allUsers.forEach(u => {
                    if (u.referred_by === userA.referral_code) team.B.push(u);
                });
            });

            team.B.forEach(userB => {
                allUsers.forEach(u => {
                    if (u.referred_by === userB.referral_code) team.C.push(u);
                });
            });

            team.C.forEach(userC => {
                allUsers.forEach(u => {
                    if (u.referred_by === userC.referral_code) team.D.push(u);
                });
            });

            return team;
        }

        async function updateTeamPage() {
            if (!currentUser) return;
            
            const botUsername = "OilMineXBot";
            document.getElementById('referralLink').textContent = `https://t.me/${botUsername}?start=${currentUser.referral_code}`;
            document.getElementById('teamTotalProfit').innerHTML = `${(currentUser.team_commissions || 0).toFixed(2)} <span class="balance-currency">$</span>`;

            const team = await getTeamStructure();
            const { data: allUsers } = await supabase.from('users').select('*');
            
            let totalMembers = team.A.length + team.B.length + team.C.length + team.D.length;
            let activeMembers = 0;
            let inactiveMembers = 0;
            
            [...team.A, ...team.B, ...team.C, ...team.D].forEach(member => {
                if (isUserActive(member)) {
                    activeMembers++;
                } else {
                    inactiveMembers++;
                }
            });

            document.getElementById('totalTeamCount').textContent = totalMembers;
            document.getElementById('activeTeamCount').textContent = activeMembers;
            document.getElementById('inactiveTeamCount').textContent = inactiveMembers;
            document.getElementById('globalUserCount').textContent = allUsers ? allUsers.length : 0;

            renderTeamList(team[currentTeamLevel]);
        }

        function switchTeamTab(level, element) {
            document.querySelectorAll('#teamPage .tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
            currentTeamLevel = level;
            
            getTeamStructure().then(team => {
                renderTeamList(team[level]);
            });
        }

        function renderTeamList(members) {
            const container = document.getElementById('teamMembersList');
            
            if (!members || members.length === 0) {
                container.innerHTML = '<div class="empty-state"><span>ğŸ‘¥</span><p>' + (currentLanguage === 'ar' ? 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø£Ø¹Ø¶Ø§Ø¡ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰' : 'No members in this level') + '</p></div>';
                return;
            }

            container.innerHTML = members.map(member => {
                const active = isUserActive(member);
                return `
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 14px; margin-bottom: 10px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 24px;">ğŸ‘¤</span>
                        <div>
                            <div style="font-weight: 700;">${member.username}</div>
                            <div style="font-size: 11px; opacity: 0.6;">${currentLanguage === 'ar' ? 'ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„' : 'Join Date'}: ${new Date(member.created_at).toLocaleDateString(currentLanguage === 'ar' ? 'ar-EG' : 'en-US')}</div>
                        </div>
                    </div>
                    <div>
                        ${active 
                            ? '<span class="status-badge status-active">' + (currentLanguage === 'ar' ? 'Ù†Ø´Ø·' : 'Active') + '</span>' 
                            : '<span class="status-badge status-inactive">' + (currentLanguage === 'ar' ? 'ØºÙŠØ± Ù†Ø´Ø·' : 'Inactive') + '</span>'}
                    </div>
                </div>
                `;
            }).join('');
        }

        function addReferralCommission() {
            const userId = document.getElementById('referralUserSelect').value;
            const amount = parseFloat(document.getElementById('referralAmount').value);
            const note = document.getElementById('referralNote').value.trim();
            
            if (!userId || !amount || amount <= 0) {
                showToast('âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­', 'danger');
                return;
            }
            
            adjustUserBalance(userId, amount, 'referral', note);
        }

        // ==================== Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ====================
        function addTransaction(type, title, amount, status = 'pending') {
            if (!currentUser.transactions) currentUser.transactions = [];
            
            currentUser.transactions.unshift({
                id: Date.now(),
                type,
                title,
                amount,
                status,
                date: new Date().toISOString()
            });
            
            saveUserData();
        }

        function updateTransactionsList() {
            const recentContainer = document.getElementById('recentTransactions');
            const allContainer = document.getElementById('allTransactionsList');
            
            if (!currentUser.transactions || currentUser.transactions.length === 0) {
                recentContainer.innerHTML = '<div class="empty-state"><span>ğŸ“­</span><p>' + (currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª' : 'No transactions') + '</p></div>';
                if (allContainer) allContainer.innerHTML = '<div class="empty-state"><span>ğŸ“­</span><p>' + (currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª' : 'No transactions') + '</p></div>';
                return;
            }
            
            recentContainer.innerHTML = currentUser.transactions.slice(0, 5).map(t => formatTransaction(t)).join('');
            
            if (allContainer) {
                allContainer.innerHTML = currentUser.transactions.map(t => formatTransaction(t)).join('');
            }
        }

        // ==================== Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ====================
        function addNotification(title, message, type = 'info') {
            if (!currentUser.notifications) currentUser.notifications = [];
            
            currentUser.notifications.unshift({
                id: Date.now(),
                title,
                message,
                type,
                date: new Date().toISOString(),
                read: false
            });
            
            currentUser.unread_count = (currentUser.unread_count || 0) + 1;
            saveUserData();
            updateNotificationBadge();
        }

        function addNotificationToUser(user, title, message, type) {
            if (!user.notifications) user.notifications = [];
            user.notifications.unshift({
                id: Date.now(),
                title,
                message,
                type,
                date: new Date().toISOString(),
                read: false
            });
            user.unread_count = (user.unread_count || 0) + 1;
        }

        function updateNotificationsList() {
            const container = document.getElementById('notificationsList');
            
            if (!currentUser.notifications || currentUser.notifications.length === 0) {
                container.innerHTML = '<div class="empty-state"><span>ğŸ””</span><p>' + (currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª' : 'No notifications') + '</p></div>';
                return;
            }
            
            container.innerHTML = currentUser.notifications.map(n => `
                <div class="notification-item ${n.read ? '' : 'unread'}" onclick="markAsRead('${n.id}')">
                    <div class="notification-title">
                        ${n.type === 'success' ? 'âœ…' : n.type === 'danger' ? 'âŒ' : 'â„¹ï¸'} ${n.title}
                    </div>
                    <div class="notification-message">${n.message}</div>
                    <div class="notification-time">${new Date(n.date).toLocaleString(currentLanguage === 'ar' ? 'ar-EG' : 'en-US')}</div>
                </div>
            `).join('');
        }

        function markAsRead(id) {
            const notification = currentUser.notifications.find(n => n.id == id);
            if (notification && !notification.read) {
                notification.read = true;
                currentUser.unread_count = Math.max((currentUser.unread_count || 0) - 1, 0);
                saveUserData();
                updateNotificationsList();
                updateNotificationBadge();
            }
        }

        function markAllAsRead() {
            if (currentUser.notifications) {
                currentUser.notifications.forEach(n => n.read = true);
                currentUser.unread_count = 0;
                saveUserData();
                updateNotificationsList();
                updateNotificationBadge();
                showToast('âœ… ' + (currentLanguage === 'ar' ? 'ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…Ù‚Ø±ÙˆØ¡' : 'Marked all as read'), 'success');
            }
        }

        function updateNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            const count = currentUser?.unread_count || 0;
            
            if (count > 0) {
                badge.style.display = 'inline';
                badge.textContent = count > 9 ? '9+' : count;
            } else {
                badge.style.display = 'none';
            }
        }

        // ==================== Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø³Ø­Ø¨ ====================
        function updateWithdrawAddressesList() {
            const container = document.getElementById('savedAddresses');
            const select = document.getElementById('withdrawAddressSelect');
            
            if (!currentUser.withdraw_addresses || currentUser.withdraw_addresses.length === 0) {
                container.innerHTML = '<p style="text-align:center; opacity:0.7;">' + (currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø­ÙÙˆØ¸Ø©' : 'No saved addresses') + '</p>';
                select.innerHTML = '<option value="">' + (currentLanguage === 'ar' ? 'Ø§Ø®ØªØ± Ø¹Ù†ÙˆØ§Ù†...' : 'Choose address...') + '</option>';
                return;
            }
            
            container.innerHTML = currentUser.withdraw_addresses.map(addr => `
                <div class="withdraw-address-item">
                    <div class="address-info">
                        <div class="address-type">${getNetworkName(addr.network)}</div>
                        <div class="address-value">${addr.address}</div>
                    </div>
                    <div class="address-actions">
                        <button class="address-btn" onclick="setDefaultAddress('${addr.id}')" title="${currentLanguage === 'ar' ? 'ØªØ¹ÙŠÙŠÙ† ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ' : 'Set as default'}">â­</button>
                        <button class="address-btn" onclick="deleteAddress('${addr.id}')" title="${currentLanguage === 'ar' ? 'Ø­Ø°Ù' : 'Delete'}">ğŸ—‘ï¸</button>
                    </div>
                </div>
            `).join('');
            
            let options = '<option value="">' + (currentLanguage === 'ar' ? 'Ø§Ø®ØªØ± Ø¹Ù†ÙˆØ§Ù†...' : 'Choose address...') + '</option>';
            currentUser.withdraw_addresses.forEach(addr => {
                options += `<option value="${addr.id}" ${addr.default ? 'selected' : ''}>${getNetworkName(addr.network)} - ${addr.address.substring(0,10)}...</option>`;
            });
            select.innerHTML = options;
        }

        function getNetworkName(network) {
            const networks = {
                trc20: 'TRC20',
                bep20: 'BEP20',
                erc20: 'ERC20'
            };
            return networks[network] || network;
        }

        function showAddAddressForm() {
            document.getElementById('addAddressForm').style.display = 'block';
        }

        function cancelAddAddress() {
            document.getElementById('addAddressForm').style.display = 'none';
            document.getElementById('newAddress').value = '';
        }

        function saveWithdrawAddress() {
            const network = document.getElementById('newAddressNetwork').value;
            const address = document.getElementById('newAddress').value.trim();
            
            if (!address) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' : 'Please enter address'), 'danger');
                return;
            }
            
            if (!currentUser.withdraw_addresses) currentUser.withdraw_addresses = [];
            
            const newAddress = {
                id: Date.now().toString(),
                network,
                address,
                default: currentUser.withdraw_addresses.length === 0
            };
            
            currentUser.withdraw_addresses.push(newAddress);
            saveUserData();
            updateWithdrawAddressesList();
            cancelAddAddress();
            showToast('âœ… ' + (currentLanguage === 'ar' ? 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' : 'Address saved'), 'success');
        }

        function setDefaultAddress(id) {
            currentUser.withdraw_addresses.forEach(addr => {
                addr.default = addr.id === id;
            });
            saveUserData();
            updateWithdrawAddressesList();
            showToast('â­ ' + (currentLanguage === 'ar' ? 'ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ' : 'Default address set'), 'success');
        }

        function deleteAddress(id) {
            if (confirm(currentLanguage === 'ar' ? 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŸ' : 'Are you sure you want to delete this address?')) {
                currentUser.withdraw_addresses = currentUser.withdraw_addresses.filter(addr => addr.id !== id);
                saveUserData();
                updateWithdrawAddressesList();
                showToast('âœ… ' + (currentLanguage === 'ar' ? 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' : 'Address deleted'), 'success');
            }
        }

        function updateWithdrawAddress() {}

        // ==================== Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù† ====================
        function showSecuritySettings() {
            if (currentUser.security_enabled) {
                const oldCode = prompt(currentLanguage === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ…:' : 'Enter old security code:', '');
                if (oldCode !== currentUser.security_code) {
                    showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù‚Ø¯ÙŠÙ… ØºÙŠØ± ØµØ­ÙŠØ­' : 'Old code is incorrect'), 'danger');
                    return;
                }
            }
            
            const code = prompt(currentLanguage === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø£Ù…Ø§Ù† Ø¬Ø¯ÙŠØ¯ (6 Ø£Ø±Ù‚Ø§Ù…):' : 'Enter new security code (6 digits):', '');
            if (code) {
                if (code.length === 6 && /^\d+$/.test(code)) {
                    currentUser.security_code = code;
                    currentUser.security_enabled = true;
                    saveUserData();
                    updateUI();
                    showToast('âœ… ' + (currentLanguage === 'ar' ? 'ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù† Ø¨Ù†Ø¬Ø§Ø­' : 'Security code set successfully'), 'success');
                } else {
                    showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù† ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 6 Ø£Ø±Ù‚Ø§Ù…' : 'Security code must be 6 digits'), 'danger');
                }
            }
        }

        async function verifyAndSubmitWithdraw() {
            if (!currentUser.security_enabled) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„ Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù† Ø£ÙˆÙ„Ø§Ù‹' : 'Enable security code first'), 'danger');
                showSecuritySettings();
                return;
            }
            
            if (currentUser.banned) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±' : 'Your account is banned'), 'danger');
                return;
            }

            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const addressId = document.getElementById('withdrawAddressSelect').value;
            const securityCode = document.getElementById('securityCode').value;
            
            if (!addressId) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø§Ø®ØªØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø³Ø­Ø¨' : 'Select withdraw address'), 'danger');
                return;
            }
            
            if (!amount || amount < 10) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø§Ù„Ù…Ø¨Ù„Øº ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 10$ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„' : 'Minimum amount is 10$'), 'danger');
                return;
            }
            
            if (amount > currentUser.balance) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ' : 'Insufficient balance'), 'danger');
                return;
            }
            
            if (currentUser.security_enabled && securityCode !== currentUser.security_code) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø±Ù…Ø² Ø§Ù„Ø£Ù…Ø§Ù† ØºÙŠØ± ØµØ­ÙŠØ­' : 'Invalid security code'), 'danger');
                return;
            }
            
            const address = currentUser.withdraw_addresses.find(a => a.id === addressId);
            
            currentUser.balance -= amount;
            
            const request = {
                id: Date.now(),
                userId: currentUser.id,
                username: currentUser.username,
                amount,
                network: address.network,
                address: address.address,
                date: new Date().toISOString(),
                status: 'pending'
            };
            
            if (!currentUser.pending_withdrawals) currentUser.pending_withdrawals = [];
            currentUser.pending_withdrawals.push(request);
            
            addTransaction('withdraw', (currentLanguage === 'ar' ? `Ø·Ù„Ø¨ Ø³Ø­Ø¨ ${amount} $` : `Withdraw request ${amount} $`), -amount, 'pending');
            addNotification('ğŸ’¸ ' + (currentLanguage === 'ar' ? 'Ø·Ù„Ø¨ Ø³Ø­Ø¨' : 'Withdraw request'), (currentLanguage === 'ar' ? `Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¨Ù…Ø¨Ù„Øº ${amount} $ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©` : `Withdraw request of ${amount} $ is pending`), 'info');
            
            await saveUserData();
            updateUI();
            
            showToast('âœ… ' + (currentLanguage === 'ar' ? 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨' : 'Withdraw request sent'), 'success');
            
            sendToTelegram(`ğŸ’¸ <b>Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¬Ø¯ÙŠØ¯</b>\nğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${currentUser.username}\nğŸ†” Ø§Ù„Ù…Ø¹Ø±Ù: ${currentUser.telegram_id}\nğŸ’µ Ø§Ù„Ù…Ø¨Ù„Øº: ${amount}$\nğŸŒ Ø§Ù„Ø´Ø¨ÙƒØ©: ${address.network}\nğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address.address}`);
            
            document.getElementById('withdrawAmount').value = '';
            document.getElementById('securityCode').value = '';
        }

        // ==================== Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ====================
        function renderPackages() {
            const container = document.getElementById('allPackages');
            
            container.innerHTML = Object.entries(PACKAGES).map(([key, pkg]) => {
                const packageName = typeof pkg.name === 'object' ? pkg.name[currentLanguage] : pkg.name;
                return `
                <div class="package-card ${selectedPackage === key ? 'selected' : ''}" onclick="selectPackage('${key}')">
                    <div class="package-icon">${pkg.icon}</div>
                    <div class="package-name">${packageName}</div>
                    <div class="package-price">${pkg.price} $</div>
                    <div class="package-power">âš¡ ${pkg.power} TH/s</div>
                </div>
            `}).join('');
        }

        function selectPackage(packageId) {
            if (currentUser.banned) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±' : 'Your account is banned'), 'danger');
                return;
            }

            selectedPackage = packageId;
            const pkg = PACKAGES[packageId];
            const packageName = typeof pkg.name === 'object' ? pkg.name[currentLanguage] : pkg.name;
            
            document.getElementById('selectedPackageTitle').textContent = (currentLanguage === 'ar' ? 'Ø¨Ø§Ù‚Ø© ' : 'Package ') + packageName;
            document.getElementById('selectedPackagePower').textContent = pkg.power + ' TH/s';
            document.getElementById('selectedPackagePrice').textContent = pkg.price + ' $';
            document.getElementById('selectedPackageDaily').textContent = pkg.dailyProfit.toFixed(2) + ' $';
            document.getElementById('packageDetails').style.display = 'block';
            
            document.querySelectorAll('.package-card').forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
        }

        async function purchasePackage() {
            if (currentUser.banned) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±' : 'Your account is banned'), 'danger');
                return;
            }

            const pkg = PACKAGES[selectedPackage];
            const packageName = typeof pkg.name === 'object' ? pkg.name[currentLanguage] : pkg.name;
            
            if (currentUser.balance < pkg.price) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø±ØµÙŠØ¯Ùƒ ØºÙŠØ± ÙƒØ§ÙÙ' : 'Insufficient balance'), 'danger');
                return;
            }
            
            currentUser.balance -= pkg.price;
            currentUser.mining_power += pkg.power;
            if (!currentUser.packages) currentUser.packages = [];
            currentUser.packages.push({
                ...pkg,
                id: Date.now(),
                purchasedAt: new Date().toISOString()
            });
            
            addTransaction('package', (currentLanguage === 'ar' ? `Ø´Ø±Ø§Ø¡ Ø¨Ø§Ù‚Ø© ${packageName}` : `Buy ${packageName} package`), -pkg.price, 'approved');
            addNotification('ğŸ ' + (currentLanguage === 'ar' ? 'Ø´Ø±Ø§Ø¡ Ø¨Ø§Ù‚Ø©' : 'Package purchase'), (currentLanguage === 'ar' ? `ØªÙ… Ø´Ø±Ø§Ø¡ Ø¨Ø§Ù‚Ø© ${packageName} Ø¨Ù†Ø¬Ø§Ø­` : `Successfully purchased ${packageName} package`), 'success');
            
            await saveUserData();
            updateUI();
            showToast(`âœ… ${currentLanguage === 'ar' ? 'ØªÙ… Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­' : 'Package purchased successfully'}`, 'success');
            
            sendToTelegram(`ğŸ›’ <b>${currentLanguage === 'ar' ? 'Ø´Ø±Ø§Ø¡ Ø¨Ø§Ù‚Ø©' : 'Package purchase'}</b>\nğŸ‘¤ ${currentUser.username}\nğŸ“¦ ${currentLanguage === 'ar' ? 'Ø§Ù„Ø¨Ø§Ù‚Ø©' : 'Package'}: ${packageName}\nğŸ’° ${currentLanguage === 'ar' ? 'Ø§Ù„Ø³Ø¹Ø±' : 'Price'}: ${pkg.price}$\nâš¡ ${currentLanguage === 'ar' ? 'Ø§Ù„Ù‚ÙˆØ©' : 'Power'}: ${pkg.power} TH/s`);
        }

        // ==================== Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ====================
        async function submitDeposit(network) {
            if (currentUser.banned) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±' : 'Your account is banned'), 'danger');
                return;
            }

            const amountInput = document.getElementById(`${network}Amount`);
            const txIdInput = document.getElementById(`${network}TxId`);
            
            const amount = parseFloat(amountInput.value);
            const txId = txIdInput.value.trim();
            
            const minAmount = network === 'erc20' ? 20 : 10;
            
            if (!amount || amount < minAmount) {
                showToast(`âŒ ${currentLanguage === 'ar' ? 'Ø§Ù„Ù…Ø¨Ù„Øº ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ†' : 'Amount must be at least'} ${minAmount}$`, 'danger');
                return;
            }
            
            if (!txId) {
                showToast('âŒ ' + (currentLanguage === 'ar' ? 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ TxID' : 'Please enter TxID'), 'danger');
                return;
            }
            
            const request = {
                id: Date.now(),
                userId: currentUser.id,
                username: currentUser.username,
                network,
                amount,
                txId,
                date: new Date().toISOString(),
                status: 'pending'
            };
            
            if (!currentUser.pending_deposits) currentUser.pending_deposits = [];
            currentUser.pending_deposits.push(request);
            
            addTransaction('deposit', (currentLanguage === 'ar' ? `Ø·Ù„Ø¨ Ø¥ÙŠØ¯Ø§Ø¹ ${amount} $ (${network})` : `Deposit request ${amount} $ (${network})`), amount, 'pending');
            addNotification('ğŸ’° ' + (currentLanguage === 'ar' ? 'Ø·Ù„Ø¨ Ø¥ÙŠØ¯Ø§Ø¹' : 'Deposit request'), (currentLanguage === 'ar' ? `Ø·Ù„Ø¨ Ø¥ÙŠØ¯Ø§Ø¹ Ø¨Ù…Ø¨Ù„Øº ${amount} $ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©` : `Deposit request of ${amount} $ is pending`), 'info');
            
            await saveUserData();
            updateUI();
            
            showToast('âœ… ' + (currentLanguage === 'ar' ? 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹' : 'Deposit request sent'), 'success');
            
            sendToTelegram(`ğŸ’° <b>${currentLanguage === 'ar' ? 'Ø·Ù„Ø¨ Ø¥ÙŠØ¯Ø§Ø¹ Ø¬Ø¯ÙŠØ¯' : 'New deposit request'}</b>\nğŸ‘¤ ${currentLanguage === 'ar' ? 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' : 'User'}: ${currentUser.username}\nğŸ†” ID: ${currentUser.telegram_id}\nğŸŒ Network: ${network}\nğŸ’µ Amount: ${amount}$\nğŸ†” TxID: ${txId}`);
            
            amountInput.value = '';
            txIdInput.value = '';
        }

        function copyAddress(network) {
            const address = document.getElementById(`${network}Address`).textContent;
            navigator.clipboard.writeText(address);
            showToast('ğŸ“‹ ' + (currentLanguage === 'ar' ? 'ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù†' : 'Address copied'), 'success');
        }

        function switchPaymentTab(tab, element) {
            document.querySelectorAll('#depositPage .tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
            
            document.getElementById('trc20Payment').style.display = tab === 'trc20' ? 'block' : 'none';
            document.getElementById('bep20Payment').style.display = tab === 'bep20' ? 'block' : 'none';
            document.getElementById('erc20Payment').style.display = tab === 'erc20' ? 'block' : 'none';
        }

        // ==================== Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ====================
        function displayAdminMessages() {
            const container = document.getElementById('adminMessagesContainer');
            
            if (!currentUser.seen_messages) currentUser.seen_messages = [];
            
            const unseenMessages = adminMessages.filter(msg => !currentUser.seen_messages.includes(msg.id));
            
            if (unseenMessages.length === 0) {
                container.innerHTML = '';
                return;
            }
            
            container.innerHTML = unseenMessages.map(msg => `
                <div class="admin-message">
                    <button class="admin-message-close" onclick="closeAdminMessage('${msg.id}')">âœ•</button>
                    <div class="admin-message-title">
                        <span>ğŸ“¢</span>
                        <span>${msg.title}</span>
                    </div>
                    <div class="admin-message-content">
                        ${msg.content}
                    </div>
                </div>
            `).join('');
        }

        function closeAdminMessage(messageId) {
            if (!currentUser.seen_messages) currentUser.seen_messages = [];
            currentUser.seen_messages.push(messageId);
            saveUserData();
            displayAdminMessages();
        }

        // ==================== Ø§Ù„ØªÙ†Ù‚Ù„ ====================
        function navigateTo(pageId, element) {
            if (currentUser.banned && pageId !== 'profilePage' && pageId !== 'settingsPage') {
                showToast('ğŸš« ' + (currentLanguage === 'ar' ? 'Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±' : 'Your account is banned'), 'danger');
                return;
            }

            document.querySelectorAll('.page-container').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            element.classList.add('active');
            
            if (pageId === 'teamPage') {
                updateTeamPage();
            }
        }

        function showPage(pageId) {
            if (currentUser.banned && pageId !== 'profilePage' && pageId !== 'settingsPage') {
                showToast('ğŸš« ' + (currentLanguage === 'ar' ? 'Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±' : 'Your account is banned'), 'danger');
                return;
            }

            document.querySelectorAll('.page-container').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            if (pageId === 'teamPage') {
                updateTeamPage();
            }
            if (pageId === 'adminPage' && ADMIN_IDS.includes(currentUser.telegram_id)) {
                updateAdminPanel();
            }
        }

        function switchAdminTab(tab, element) {
            document.querySelectorAll('#adminPage .tab').forEach(t => t.classList.remove('active'));
            element.classList.add('active');
            
            document.getElementById('adminDeposits').style.display = tab === 'deposits' ? 'block' : 'none';
            document.getElementById('adminWithdrawals').style.display = tab === 'withdrawals' ? 'block' : 'none';
            document.getElementById('adminHistory').style.display = tab === 'history' ? 'block' : 'none';
            document.getElementById('adminUsers').style.display = tab === 'users' ? 'block' : 'none';
            document.getElementById('adminMessages').style.display = tab === 'messages' ? 'block' : 'none';
            document.getElementById('adminReferrals').style.display = tab === 'referrals' ? 'block' : 'none';
            document.getElementById('adminRewards').style.display = tab === 'rewards' ? 'block' : 'none';
        }

        // ==================== Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ====================
        function toggleNotifications() {
            currentUser.notifications_enabled = !currentUser.notifications_enabled;
            document.getElementById('notificationsStatus').textContent = currentUser.notifications_enabled 
                ? (currentLanguage === 'ar' ? 'Ù…ÙØ¹Ù„Ø©' : 'Enabled') 
                : (currentLanguage === 'ar' ? 'Ù…Ø¹Ø·Ù„Ø©' : 'Disabled');
            saveUserData();
            showToast(currentUser.notifications_enabled 
                ? (currentLanguage === 'ar' ? 'âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª' : 'âœ… Notifications enabled') 
                : (currentLanguage === 'ar' ? 'âŒ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª' : 'âŒ Notifications disabled'), 'success');
        }

        function contactSupport() {
            showToast('ğŸ“ ' + (currentLanguage === 'ar' ? 'Ù‚Ø±ÙŠØ¨Ø§Ù‹...' : 'Coming soon...'), 'info');
        }

        function showTerms() {
            alert(currentLanguage === 'ar' 
                ? 'Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…:\n\n1. Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ÙƒÙ„ 24 Ø³Ø§Ø¹Ø©\n2. Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø³Ø­Ø¨ 2%\n3. Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ØªØ­ØªÙØ¸ Ø¨Ø§Ù„Ø­Ù‚ ÙÙŠ Ø­Ø¸Ø± Ø£ÙŠ Ø­Ø³Ø§Ø¨ Ù…Ø®Ø§Ù„Ù'
                : 'Terms & Conditions:\n\n1. Mining every 24 hours\n2. Withdrawal fee 2%\n3. Administration reserves the right to ban any violating account');
        }

        function showLanguageSelector() {
            document.getElementById('languageSelectorModal').style.display = 'flex';
        }

        function logout() {
            if (confirm(currentLanguage === 'ar' ? 'Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ' : 'Are you sure you want to logout?')) {
                tg.close();
            }
        }

        // ==================== ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
        function updateUI() {
            if (!currentUser) return;
            
            if (currentUser.banned) {
                document.getElementById('profileBannedStatus').style.display = 'inline-block';
            } else {
                document.getElementById('profileBannedStatus').style.display = 'none';
            }
            
            document.getElementById('userBalance').innerHTML = `${(currentUser.balance || 0).toFixed(2)} <span class="balance-currency">$</span>`;
            document.getElementById('packagesBalance').innerHTML = `${(currentUser.balance || 0).toFixed(2)} <span class="balance-currency">$</span>`;
            document.getElementById('withdrawBalance').innerHTML = `${(currentUser.balance || 0).toFixed(2)} <span class="balance-currency">$</span>`;
            
            if (!balanceVisible) {
                document.getElementById('userBalance').classList.add('blur');
            }
            
            const totalPower = currentUser.mining_power || 0;
            const dailyProfit = totalPower * 0.1;
            
            document.getElementById('homeMiningPower').textContent = totalPower + ' TH/s';
            document.getElementById('miningTotalPower').textContent = totalPower + ' TH/s';
            document.getElementById('miningDailyProfit').textContent = dailyProfit.toFixed(2) + ' $';
            document.getElementById('miningTotalProfit').textContent = (currentUser.total_profit || 0).toFixed(2) + ' $';
            
            document.getElementById('profileName').textContent = currentUser.username;
            document.getElementById('profileUsername').textContent = currentUser.username;
            document.getElementById('profileTelegramId').textContent = currentUser.telegram_id;
            document.getElementById('profileJoinDate').textContent = new Date(currentUser.created_at).toLocaleDateString(currentLanguage === 'ar' ? 'ar-EG' : 'en-US');
            
            const totalDeposits = (currentUser.transactions || [])
                .filter(t => t.type === 'deposit' && t.status === 'approved')
                .reduce((sum, t) => sum + t.amount, 0);
            
            const totalWithdrawals = (currentUser.transactions || [])
                .filter(t => t.type === 'withdraw' && t.status === 'approved')
                .reduce((sum, t) => sum + Math.abs(t.amount), 0);
            
            document.getElementById('profileTotalDeposits').textContent = totalDeposits.toFixed(2) + ' $';
            document.getElementById('profileTotalWithdrawals').textContent = totalWithdrawals.toFixed(2) + ' $';
            document.getElementById('profileTotalProfit').textContent = (currentUser.total_profit || 0).toFixed(2) + ' $';
            document.getElementById('profileTotalPackages').textContent = (currentUser.packages || []).length;
            
            updateActiveMiners();
            updateTransactionsList();
            updateNotificationsList();
            updateNotificationBadge();
            updateWithdrawAddressesList();
            
            document.getElementById('securityCodeStatus').textContent = currentUser.security_enabled 
                ? (currentLanguage === 'ar' ? 'Ù…ÙØ¹Ù„' : 'Enabled') 
                : (currentLanguage === 'ar' ? 'ØºÙŠØ± Ù…ÙØ¹Ù„' : 'Disabled');
            
            if (ADMIN_IDS.includes(currentUser.telegram_id)) {
                updateAdminPanel();
            }
        }

        function updateActiveMiners() {
            const container = document.getElementById('activeMinersList');
            
            if (!currentUser.packages || currentUser.packages.length === 0) {
                container.innerHTML = '<div class="empty-state"><span>âš™ï¸</span><p>' + (currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¢Ù„Ø§Øª ØªØ¹Ø¯ÙŠÙ†' : 'No mining machines') + '</p></div>';
                return;
            }
            
            container.innerHTML = currentUser.packages.map(pkg => {
                const packageName = typeof pkg.name === 'object' ? pkg.name[currentLanguage] : pkg.name;
                return `
                <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 14px; margin-bottom: 10px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 32px;">${pkg.icon || 'âš™ï¸'}</span>
                        <div>
                            <div style="font-weight: 700;">${currentLanguage === 'ar' ? 'Ø¨Ø§Ù‚Ø©' : 'Package'} ${packageName}</div>
                            <div style="font-size: 13px; opacity: 0.7;">âš¡ ${pkg.power} TH/s</div>
                        </div>
                    </div>
                    <div>
                        <span style="display: inline-block; width: 8px; height: 8px; background: var(--success); border-radius: 50%;"></span>
                        <span style="color: var(--success); margin-right: 5px;">${currentLanguage === 'ar' ? 'Ù†Ø´Ø·' : 'Active'}</span>
                    </div>
                </div>
            `}).join('');
        }

        // ==================== Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ====================
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = 'toast';
            
            const colors = {
                success: 'var(--success)',
                danger: 'var(--danger)',
                warning: 'var(--warning)',
                info: 'var(--primary)'
            };
            
            toast.style.borderRightColor = colors[type] || colors.info;
            toast.innerHTML = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideUp 0.3s reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function sendToTelegram(message) {
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: ADMIN_IDS[0],
                    text: message,
                    parse_mode: 'HTML'
                })
            }).catch(err => console.error('Telegram error:', err));
        }

        function toggleBalanceVisibility() {
            balanceVisible = !balanceVisible;
            const balanceElement = document.getElementById('userBalance');
            const btn = document.getElementById('toggleBalanceBtn');
            
            if (balanceVisible) {
                balanceElement.classList.remove('blur');
                btn.textContent = 'ğŸ‘ï¸';
            } else {
                balanceElement.classList.add('blur');
                btn.textContent = 'ğŸ‘ï¸â€ğŸ—¨ï¸';
            }
        }

        function startRealTimeUpdates() {
            if (updateInterval) clearInterval(updateInterval);
            
            updateInterval = setInterval(() => {
                if (currentUser) {
                    updateUI();
                }
            }, 1000);
        }

        function acceptTerms() {
            currentUser.terms_accepted = true;
            saveUserData();
            document.getElementById('termsScreen').style.display = 'none';
            showToast(currentLanguage === 'ar' ? 'âœ… ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø´Ø±ÙˆØ·' : 'âœ… Terms accepted', 'success');
        }

        // ==================== ØªÙ†Ø¸ÙŠÙ ====================
        window.onbeforeunload = function() {
            if (updateInterval) clearInterval(updateInterval);
            if (miningInterval) clearInterval(miningInterval);
            if (miningEffectInterval) clearInterval(miningEffectInterval);
            if (currentUser) {
                currentUser.last_active = new Date().toISOString();
                saveUserData();
            }
        };
    </script>
</body>
</html>
